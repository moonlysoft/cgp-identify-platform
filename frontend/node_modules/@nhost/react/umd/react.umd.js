(function(w,A){typeof exports=="object"&&typeof module!="undefined"?A(exports,require("react"),require("react/jsx-runtime")):typeof define=="function"&&define.amd?define(["exports","react","react/jsx-runtime"],A):(w=typeof globalThis!="undefined"?globalThis:w||self,A(w["@nhost/react"]={},w.React,w._jsx))})(this,function(w,A,q){"use strict";var hf=Object.defineProperty,pf=Object.defineProperties;var vf=Object.getOwnPropertyDescriptors;var Tr=Object.getOwnPropertySymbols;var Zs=Object.prototype.hasOwnProperty,eo=Object.prototype.propertyIsEnumerable;var Xs=(w,A,q)=>A in w?hf(w,A,{enumerable:!0,configurable:!0,writable:!0,value:q}):w[A]=q,Rn=(w,A)=>{for(var q in A||(A={}))Zs.call(A,q)&&Xs(w,q,A[q]);if(Tr)for(var q of Tr(A))eo.call(A,q)&&Xs(w,q,A[q]);return w},to=(w,A)=>pf(w,vf(A));var ro=(w,A)=>{var q={};for(var ne in w)Zs.call(w,ne)&&A.indexOf(ne)<0&&(q[ne]=w[ne]);if(w!=null&&Tr)for(var ne of Tr(w))A.indexOf(ne)<0&&eo.call(w,ne)&&(q[ne]=w[ne]);return q};function ne(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}function no(t){if(t&&t.__esModule)return t;var e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return t&&Object.keys(t).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})}}),e.default=t,Object.freeze(e)}var In=ne(A),io=no(A);function br(t){this.message=t}br.prototype=new Error,br.prototype.name="InvalidCharacterError";var kn=typeof window!="undefined"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new br("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,s=0,o="";n=e.charAt(s++);~n&&(r=i%4?64*r+n:n,i++%4)?o+=String.fromCharCode(255&r>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};function so(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(r){return decodeURIComponent(kn(r).replace(/(.)/g,function(n,i){var s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}(e)}catch{return kn(e)}}function bt(t){this.message=t}function Dn(t,e){if(typeof t!="string")throw new bt("Invalid token specified");var r=(e=e||{}).header===!0?0:1;try{return JSON.parse(so(t.split(".")[r]))}catch(n){throw new bt("Invalid token specified: "+n.message)}}bt.prototype=new Error,bt.prototype.name="InvalidTokenError";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var g=function(){return g=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},g.apply(this,arguments)};function Or(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function I(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s}function $(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))}var C;(function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"})(C||(C={}));var _e;(function(t){t.Parent="#_parent",t.Internal="#_internal"})(_e||(_e={}));var Ot=C.Start,At=C.Stop,nt=C.Raise,it=C.Send,Ar=C.Cancel,Nn=C.NullEvent,xt=C.Assign,oo=C.After,ao=C.DoneState,_t=C.Log,Cn=C.Init,Pt=C.Invoke,uo=C.ErrorExecution,xr=C.ErrorPlatform,_r=C.ErrorCustom,Rt=C.Update,Un=C.Choose,jn=C.Pure,co=Object.freeze(Object.defineProperty({__proto__:null,after:oo,assign:xt,cancel:Ar,choose:Un,doneState:ao,error:_r,errorExecution:uo,errorPlatform:xr,init:Cn,invoke:Pt,log:_t,nullEvent:Nn,pure:jn,raise:nt,send:it,start:Ot,stop:At,update:Rt},Symbol.toStringTag,{value:"Module"})),Ln=".",Mn={},Pr="xstate.guard",lo="",st=!0,It;function Rr(t,e,r){r===void 0&&(r=Ln);var n=ot(t,r),i=ot(e,r);return k(i)?k(n)?i===n:!1:k(n)?n in i:Object.keys(n).every(function(s){return s in i?Rr(n[s],i[s]):!1})}function Fn(t){try{return k(t)||typeof t=="number"?"".concat(t):t.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function Ir(t,e){try{return je(t)?t:t.toString().split(e)}catch{throw new Error("'".concat(t,"' is not a valid state path."))}}function fo(t){return typeof t=="object"&&"value"in t&&"context"in t&&"event"in t&&"_event"in t}function ot(t,e){if(fo(t))return t.value;if(je(t))return kt(t);if(typeof t!="string")return t;var r=Ir(t,e);return kt(r)}function kt(t){if(t.length===1)return t[0];for(var e={},r=e,n=0;n<t.length-1;n++)n===t.length-2?r[t[n]]=t[n+1]:(r[t[n]]={},r=r[t[n]]);return e}function at(t,e){for(var r={},n=Object.keys(t),i=0;i<n.length;i++){var s=n[i];r[s]=e(t[s],s,t,i)}return r}function $n(t,e,r){var n,i,s={};try{for(var o=I(Object.keys(t)),a=o.next();!a.done;a=o.next()){var c=a.value,l=t[c];!r(l)||(s[c]=e(l,c,t))}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}var ho=function(t){return function(e){var r,n,i=e;try{for(var s=I(t),o=s.next();!o.done;o=s.next()){var a=o.value;i=i[a]}}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return i}};function po(t,e){return function(r){var n,i,s=r;try{for(var o=I(t),a=o.next();!a.done;a=o.next()){var c=a.value;s=s[e][c]}}catch(l){n={error:l}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}}function Dt(t){if(!t)return[[]];if(k(t))return[[t]];var e=L(Object.keys(t).map(function(r){var n=t[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:Dt(t[r]).map(function(i){return[r].concat(i)})}));return e}function L(t){var e;return(e=[]).concat.apply(e,$([],N(t),!1))}function Vn(t){return je(t)?t:[t]}function ie(t){return t===void 0?[]:Vn(t)}function Nt(t,e,r){var n,i;if(U(t))return t(e,r.data);var s={};try{for(var o=I(Object.keys(t)),a=o.next();!a.done;a=o.next()){var c=a.value,l=t[c];U(l)?s[c]=l(e,r.data):s[c]=l}}catch(u){n={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}return s}function vo(t){return/^(done|error)\./.test(t)}function Bn(t){return!!(t instanceof Promise||t!==null&&(U(t)||typeof t=="object")&&U(t.then))}function mo(t){return t!==null&&typeof t=="object"&&"transition"in t&&typeof t.transition=="function"}function Kn(t,e){var r,n,i=N([[],[]],2),s=i[0],o=i[1];try{for(var a=I(t),c=a.next();!c.done;c=a.next()){var l=c.value;e(l)?s.push(l):o.push(l)}}catch(u){r={error:u}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return[s,o]}function Gn(t,e){return at(t.states,function(r,n){if(!!r){var i=(k(e)?void 0:e[n])||(r?r.current:void 0);if(!!i)return{current:i,states:Gn(r,i)}}})}function yo(t,e){return{current:e,states:Gn(t,e)}}function Hn(t,e,r,n){var i=t&&r.reduce(function(s,o){var a,c,l=o.assignment,u={state:n,action:o,_event:e},p={};if(U(l))p=l(s,e.data,u);else try{for(var f=I(Object.keys(l)),d=f.next();!d.done;d=f.next()){var v=d.value,h=l[v];p[v]=U(h)?h(s,e.data,u):h}}catch(m){a={error:m}}finally{try{d&&!d.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}return Object.assign({},s,p)},t);return i}var ut=function(){};function je(t){return Array.isArray(t)}function U(t){return typeof t=="function"}function k(t){return typeof t=="string"}function zn(t,e){if(!!t)return k(t)?{type:Pr,name:t,predicate:e?e[t]:void 0}:U(t)?{type:Pr,name:t.name,predicate:t}:t}function go(t){try{return"subscribe"in t&&U(t.subscribe)}catch{return!1}}var Ee=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();It={},It[Ee]=function(){return this},It[Symbol.observable]=function(){return this};function Pe(t){return!!t&&"__xstatenode"in t}function Eo(t){return!!t&&typeof t.send=="function"}var wo=function(){var t=0;return function(){return t++,t.toString(16)}}();function kr(t,e){return k(t)||typeof t=="number"?g({type:t},e):t}function W(t,e){if(!k(t)&&"$$type"in t&&t.$$type==="scxml")return t;var r=kr(t);return g({name:r.type,data:r,$$type:"scxml",type:"external"},e)}function Le(t,e){var r=Vn(e).map(function(n){return typeof n=="undefined"||typeof n=="string"||Pe(n)?{target:n,event:t}:g(g({},n),{event:t})});return r}function So(t){if(!(t===void 0||t===lo))return ie(t)}function qn(t,e,r,n,i){var s=t.options.guards,o={state:i,cond:e,_event:n};if(e.type===Pr)return((s==null?void 0:s[e.name])||e.predicate)(r,n.data,o);var a=s==null?void 0:s[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(r,n.data,o)}function Wn(t){return typeof t=="string"?{type:t}:t}function Ct(t,e,r){if(typeof t=="object")return t;var n=function(){};return{next:t,error:e||n,complete:r||n}}function Ut(t,e){return"".concat(t,":invocation[").concat(e,"]")}var ct=W({type:Cn});function jt(t,e){return e&&e[t]||void 0}function Me(t,e){var r;if(k(t)||typeof t=="number"){var n=jt(t,e);U(n)?r={type:t,exec:n}:n?r=n:r={type:t,exec:void 0}}else if(U(t))r={type:t.name||t.toString(),exec:t};else{var n=jt(t.type,e);if(U(n))r=g(g({},t),{exec:n});else if(n){var i=n.type||t.type;r=g(g(g({},n),t),{type:i})}else r=t}return r}var lt=function(t,e){if(!t)return[];var r=je(t)?t:[t];return r.map(function(n){return Me(n,e)})};function Lt(t){var e=Me(t);return g(g({id:k(t)?t:e.id},e),{type:e.type})}function Jn(t){return k(t)?{type:nt,event:t}:we(t,{to:_e.Internal})}function Yn(t){return{type:nt,_event:W(t.event)}}function we(t,e){return{to:e?e.to:void 0,type:it,event:U(t)?t:kr(t),delay:e?e.delay:void 0,id:e&&e.id!==void 0?e.id:U(t)?t.name:Fn(t)}}function Qn(t,e,r,n){var i={_event:r},s=W(U(t.event)?t.event(e,r.data,i):t.event),o;if(k(t.delay)){var a=n&&n[t.delay];o=U(a)?a(e,r.data,i):a}else o=U(t.delay)?t.delay(e,r.data,i):t.delay;var c=U(t.to)?t.to(e,r.data,i):t.to;return g(g({},t),{to:c,_event:s,event:s.data,delay:o})}function Dr(t,e){return we(t,g(g({},e),{to:_e.Parent}))}function To(t,e,r){return we(e,g(g({},r),{to:t}))}function bo(){return Dr(Rt)}function Oo(t,e){return we(t,g(g({},e),{to:function(r,n,i){var s=i._event;return s.origin}}))}var Ao=function(t,e){return{context:t,event:e}};function xo(t,e){return t===void 0&&(t=Ao),{type:_t,label:e,expr:t}}var Xn=function(t,e,r){return g(g({},t),{value:k(t.expr)?t.expr:t.expr(e,r.data,{_event:r})})},Zn=function(t){return{type:Ar,sendId:t}};function ei(t){var e=Lt(t);return{type:C.Start,activity:e,exec:void 0}}function ti(t){var e=U(t)?t:Lt(t);return{type:C.Stop,activity:e,exec:void 0}}function ri(t,e,r){var n=U(t.activity)?t.activity(e,r.data):t.activity,i=typeof n=="string"?{id:n}:n,s={type:C.Stop,activity:i};return s}var ni=function(t){return{type:xt,assignment:t}};function _o(t){return typeof t=="object"&&"type"in t}function ii(t,e){var r=e?"#".concat(e):"";return"".concat(C.After,"(").concat(t,")").concat(r)}function ft(t,e){var r="".concat(C.DoneState,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function dt(t,e){var r="".concat(C.DoneInvoke,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Fe(t,e){var r="".concat(C.ErrorPlatform,".").concat(t),n={type:r,data:e};return n.toString=function(){return r},n}function Po(t){return{type:C.Pure,get:t}}function Ro(t,e){return we(function(r,n){return n},g(g({},e),{to:t}))}function Io(t,e){return Dr(function(r,n,i){return{type:_r,data:U(t)?t(r,n,i):t}},g(g({},e),{to:_e.Parent}))}function ko(t){return{type:C.Choose,conds:t}}function Mt(t,e,r,n,i,s){s===void 0&&(s=!1);var o=N(s?[[],i]:Kn(i,function(f){return f.type===xt}),2),a=o[0],c=o[1],l=a.length?Hn(r,n,a,e):r,u=s?[r]:void 0,p=L(c.map(function(f){var d;switch(f.type){case nt:return Yn(f);case it:var v=Qn(f,l,n,t.options.delays);return v;case _t:return Xn(f,l,n);case Un:{var h=f,m=(d=h.conds.find(function(j){var z=zn(j.cond,t.options.guards);return!z||qn(t,z,l,n,e)}))===null||d===void 0?void 0:d.actions;if(!m)return[];var T=N(Mt(t,e,l,n,lt(ie(m),t.options.actions),s),2),E=T[0],b=T[1];return l=b,u==null||u.push(l),E}case jn:{var m=f.get(l,n.data);if(!m)return[];var D=N(Mt(t,e,l,n,lt(ie(m),t.options.actions),s),2),_=D[0],F=D[1];return l=F,u==null||u.push(l),_}case At:return ri(f,l,n);case xt:{l=Hn(l,n,[f],e),u==null||u.push(l);break}default:var x=Me(f,t.options.actions),O=x.exec;if(O&&u){var P=u.length-1;x=g(g({},x),{exec:function(j){for(var z=[],ee=1;ee<arguments.length;ee++)z[ee-1]=arguments[ee];O.apply(void 0,$([u[P]],N(z),!1))}})}return x}}).filter(function(f){return!!f}));return[p,l]}var Do=Object.freeze(Object.defineProperty({__proto__:null,actionTypes:co,after:ii,assign:ni,cancel:Zn,choose:ko,done:ft,doneInvoke:dt,error:Fe,escalate:Io,forwardTo:Ro,getActionFunction:jt,initEvent:ct,isActionObject:_o,log:xo,pure:Po,raise:Jn,resolveActions:Mt,resolveLog:Xn,resolveRaise:Yn,resolveSend:Qn,resolveStop:ri,respond:Oo,send:we,sendParent:Dr,sendTo:To,sendUpdate:bo,start:ei,stop:ti,toActionObject:Me,toActionObjects:lt,toActivityDefinition:Lt},Symbol.toStringTag,{value:"Module"})),Ft=[],ht=function(t,e){Ft.push(t);var r=e(t);return Ft.pop(),r},No=function(t){return t(Ft[Ft.length-1])};function si(t){var e;return e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}},e[Ee]=function(){return this},e}function Co(t,e,r,n){var i,s=Wn(t.src),o=(i=e==null?void 0:e.options.services)===null||i===void 0?void 0:i[s.type],a=t.data?Nt(t.data,r,n):void 0,c=o?oi(o,t.id,a):si(t.id);return c.meta=t,c}function oi(t,e,r){var n=si(e);if(n.deferred=!0,Pe(t)){var i=n.state=ht(void 0,function(){return(r?t.withContext(r):t).initialState});n.getSnapshot=function(){return i}}return n}function Uo(t){try{return typeof t.send=="function"}catch{return!1}}function jo(t){return Uo(t)&&"id"in t}function Lo(t){var e;return g((e={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},e[Ee]=function(){return this},e),t)}var $t=function(t){return t.type==="atomic"||t.type==="final"};function $e(t){return Object.keys(t.states).map(function(e){return t.states[e]}).filter(function(e){return e.type!=="history"})}function ai(t){var e=[t];return $t(t)?e:e.concat(L($e(t).map(ai)))}function Ve(t,e){var r,n,i,s,o,a,c,l,u=new Set(t),p=Nr(u),f=new Set(e);try{for(var d=I(f),v=d.next();!v.done;v=d.next())for(var h=v.value,m=h.parent;m&&!f.has(m);)f.add(m),m=m.parent}catch(P){r={error:P}}finally{try{v&&!v.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var T=Nr(f);try{for(var E=I(f),b=E.next();!b.done;b=E.next()){var h=b.value;if(h.type==="compound"&&(!T.get(h)||!T.get(h).length))p.get(h)?p.get(h).forEach(function(j){return f.add(j)}):h.initialStateNodes.forEach(function(j){return f.add(j)});else if(h.type==="parallel")try{for(var D=(o=void 0,I($e(h))),_=D.next();!_.done;_=D.next()){var F=_.value;f.has(F)||(f.add(F),p.get(F)?p.get(F).forEach(function(j){return f.add(j)}):F.initialStateNodes.forEach(function(j){return f.add(j)}))}}catch(j){o={error:j}}finally{try{_&&!_.done&&(a=D.return)&&a.call(D)}finally{if(o)throw o.error}}}}catch(P){i={error:P}}finally{try{b&&!b.done&&(s=E.return)&&s.call(E)}finally{if(i)throw i.error}}try{for(var x=I(f),O=x.next();!O.done;O=x.next())for(var h=O.value,m=h.parent;m&&!f.has(m);)f.add(m),m=m.parent}catch(P){c={error:P}}finally{try{O&&!O.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}return f}function ui(t,e){var r=e.get(t);if(!r)return{};if(t.type==="compound"){var n=r[0];if(n){if($t(n))return n.key}else return{}}var i={};return r.forEach(function(s){i[s.key]=ui(s,e)}),i}function Nr(t){var e,r,n=new Map;try{for(var i=I(t),s=i.next();!s.done;s=i.next()){var o=s.value;n.has(o)||n.set(o,[]),o.parent&&(n.has(o.parent)||n.set(o.parent,[]),n.get(o.parent).push(o))}}catch(a){e={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function Mo(t,e){var r=Ve([t],e);return ui(t,Nr(r))}function Vt(t,e){return Array.isArray(t)?t.some(function(r){return r===e}):t instanceof Set?t.has(e):!1}function Fo(t){return $([],N(new Set(L($([],N(t.map(function(e){return e.ownEvents})),!1)))),!1)}function pt(t,e){return e.type==="compound"?$e(e).some(function(r){return r.type==="final"&&Vt(t,r)}):e.type==="parallel"?$e(e).every(function(r){return pt(t,r)}):!1}function $o(t){return t===void 0&&(t=[]),t.reduce(function(e,r){return r.meta!==void 0&&(e[r.id]=r.meta),e},{})}function ci(t){return new Set(L(t.map(function(e){return e.tags})))}function li(t,e){if(t===e)return!0;if(t===void 0||e===void 0)return!1;if(k(t)||k(e))return t===e;var r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(function(i){return li(t[i],e[i])})}function Vo(t){return typeof t!="object"||t===null?!1:"value"in t&&"_event"in t}function Bo(t,e){var r=t.exec,n=g(g({},t),{exec:r!==void 0?function(){return r(e.context,e.event,{action:t,state:e,_event:e._event})}:void 0});return n}var fe=function(){function t(e){var r=this,n;this.actions=[],this.activities=Mn,this.meta={},this.events=[],this.value=e.value,this.context=e.context,this._event=e._event,this._sessionid=e._sessionid,this.event=this._event.data,this.historyValue=e.historyValue,this.history=e.history,this.actions=e.actions||[],this.activities=e.activities||Mn,this.meta=$o(e.configuration),this.events=e.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=e.configuration,this.transitions=e.transitions,this.children=e.children,this.done=!!e.done,this.tags=(n=Array.isArray(e.tags)?new Set(e.tags):e.tags)!==null&&n!==void 0?n:new Set,this.machine=e.machine,Object.defineProperty(this,"nextEvents",{get:function(){return Fo(r.configuration)}})}return t.from=function(e,r){if(e instanceof t)return e.context!==r?new t({value:e.value,context:r,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e;var n=ct;return new t({value:e,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,r){if(e instanceof t){if(!e.actions.length)return e;var n=ct;return new t({value:e.value,context:r,_event:n,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,r)},t.prototype.toStrings=function(e,r){var n=this;if(e===void 0&&(e=this.value),r===void 0&&(r="."),k(e))return[e];var i=Object.keys(e);return i.concat.apply(i,$([],N(i.map(function(s){return n.toStrings(e[s],r).map(function(o){return s+r+o})})),!1))},t.prototype.toJSON=function(){var e=this;e.configuration,e.transitions;var r=e.tags;e.machine;var n=Or(e,["configuration","transitions","tags","machine"]);return g(g({},n),{tags:Array.from(r)})},t.prototype.matches=function(e){return Rr(e,this.value)},t.prototype.hasTag=function(e){return this.tags.has(e)},t.prototype.can=function(e){var r;ut(!!this.machine);var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,e);return!!(n!=null&&n.transitions.length)&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},t}(),Ko={deferEvents:!1},fi=function(){function t(e){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=g(g({},Ko),e)}return t.prototype.initialize=function(e){if(this.initialized=!0,e){if(!this.options.deferEvents){this.schedule(e);return}this.process(e)}this.flushEvents()},t.prototype.schedule=function(e){if(!this.initialized||this.processingEvent){this.queue.push(e);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(e),this.flushEvents()},t.prototype.clear=function(){this.queue=[]},t.prototype.flushEvents=function(){for(var e=this.queue.shift();e;)this.process(e),e=this.queue.shift()},t.prototype.process=function(e){this.processingEvent=!0;try{e()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},t}(),Cr=new Map,Go=0,Bt={bookId:function(){return"x:".concat(Go++)},register:function(t,e){return Cr.set(t,e),t},get:function(t){return Cr.get(t)},free:function(t){Cr.delete(t)}};function Ur(){if(typeof globalThis!="undefined")return globalThis;if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof global!="undefined")return global}function Ho(){var t=Ur();if(t&&"__xstate__"in t)return t.__xstate__}function zo(t){if(!!Ur()){var e=Ho();e&&e.register(t)}}function qo(t,e){e===void 0&&(e={});var r=t.initialState,n=new Set,i=[],s=!1,o=function(){if(!s){for(s=!0;i.length>0;){var l=i.shift();r=t.transition(r,l,c),n.forEach(function(u){return u.next(r)})}s=!1}},a=Lo({id:e.id,send:function(l){i.push(l),o()},getSnapshot:function(){return r},subscribe:function(l,u,p){var f=Ct(l,u,p);return n.add(f),f.next(r),{unsubscribe:function(){n.delete(f)}}}}),c={parent:e.parent,self:a,id:e.id||"anonymous",observers:n};return r=t.start?t.start(c):r,a}var jr={sync:!1,autoForward:!1},J;(function(t){t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped"})(J||(J={}));var Wo=function(){function t(e,r){var n=this;r===void 0&&(r=t.defaultOptions),this.machine=e,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=J.NotStarted,this.children=new Map,this.forwardTo=new Set,this.init=this.start,this.send=function(u,p){if(je(u))return n.batch(u),n.state;var f=W(kr(u,p));if(n.status===J.Stopped)return n.state;if(n.status!==J.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(f.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(f.data)));return n.scheduler.schedule(function(){n.forward(f);var d=n.nextState(f);n.update(d,f)}),n._state},this.sendTo=function(u,p){var f=n.parent&&(p===_e.Parent||n.parent.id===p),d=f?n.parent:k(p)?n.children.get(p)||Bt.get(p):Eo(p)?p:void 0;if(!d){if(!f)throw new Error("Unable to send event to child '".concat(p,"' from service '").concat(n.id,"'."));return}"machine"in d?d.send(g(g({},u),{name:u.name===_r?"".concat(Fe(n.id)):u.name,origin:n.sessionId})):d.send(u.data)};var i=g(g({},t.defaultOptions),r),s=i.clock,o=i.logger,a=i.parent,c=i.id,l=c!==void 0?c:e.id;this.id=l,this.logger=o,this.clock=s,this.parent=a,this.options=i,this.scheduler=new fi({deferEvents:this.options.deferEvents}),this.sessionId=Bt.bookId()}return Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this;return this._initialState?this._initialState:ht(this,function(){return e._initialState=e.machine.initialState,e._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),t.prototype.execute=function(e,r){var n,i;try{for(var s=I(e.actions),o=s.next();!o.done;o=s.next()){var a=o.value;this.exec(a,e,r)}}catch(c){n={error:c}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.update=function(e,r){var n,i,s,o,a,c,l,u,p=this;if(e._sessionid=this.sessionId,this._state=e,this.options.execute&&this.execute(this.state),this.children.forEach(function(P){p.state.children[P.id]=P}),this.devTools&&this.devTools.send(r.data,e),e.event)try{for(var f=I(this.eventListeners),d=f.next();!d.done;d=f.next()){var v=d.value;v(e.event)}}catch(P){n={error:P}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}try{for(var h=I(this.listeners),m=h.next();!m.done;m=h.next()){var v=m.value;v(e,e.event)}}catch(P){s={error:P}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(s)throw s.error}}try{for(var T=I(this.contextListeners),E=T.next();!E.done;E=T.next()){var b=E.value;b(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(P){a={error:P}}finally{try{E&&!E.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}var D=pt(e.configuration||[],this.machine);if(this.state.configuration&&D){var _=e.configuration.find(function(P){return P.type==="final"&&P.parent===p.machine}),F=_&&_.doneData?Nt(_.doneData,e.context,r):void 0;try{for(var x=I(this.doneListeners),O=x.next();!O.done;O=x.next()){var v=O.value;v(dt(this.id,F))}}catch(P){l={error:P}}finally{try{O&&!O.done&&(u=x.return)&&u.call(x)}finally{if(l)throw l.error}}this.stop()}},t.prototype.onTransition=function(e){return this.listeners.add(e),this.status===J.Running&&e(this.state,this.state.event),this},t.prototype.subscribe=function(e,r,n){var i=this;if(!e)return{unsubscribe:function(){}};var s,o=n;return typeof e=="function"?s=e:(s=e.next.bind(e),o=e.complete.bind(e)),this.listeners.add(s),this.status!==J.NotStarted&&s(this.state),o&&(this.status===J.Stopped?o():this.onDone(o)),{unsubscribe:function(){s&&i.listeners.delete(s),o&&i.doneListeners.delete(o)}}},t.prototype.onEvent=function(e){return this.eventListeners.add(e),this},t.prototype.onSend=function(e){return this.sendListeners.add(e),this},t.prototype.onChange=function(e){return this.contextListeners.add(e),this},t.prototype.onStop=function(e){return this.stopListeners.add(e),this},t.prototype.onDone=function(e){return this.doneListeners.add(e),this},t.prototype.off=function(e){return this.listeners.delete(e),this.eventListeners.delete(e),this.sendListeners.delete(e),this.stopListeners.delete(e),this.doneListeners.delete(e),this.contextListeners.delete(e),this},t.prototype.start=function(e){var r=this;if(this.status===J.Running)return this;this.machine._init(),Bt.register(this.sessionId,this),this.initialized=!0,this.status=J.Running;var n=e===void 0?this.initialState:ht(this,function(){return Vo(e)?r.machine.resolveState(e):r.machine.resolveState(fe.from(e,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,ct)}),this},t.prototype.stop=function(){var e,r,n,i,s,o,a,c,l,u,p=this;try{for(var f=I(this.listeners),d=f.next();!d.done;d=f.next()){var v=d.value;this.listeners.delete(v)}}catch(O){e={error:O}}finally{try{d&&!d.done&&(r=f.return)&&r.call(f)}finally{if(e)throw e.error}}try{for(var h=I(this.stopListeners),m=h.next();!m.done;m=h.next()){var v=m.value;v(),this.stopListeners.delete(v)}}catch(O){n={error:O}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}try{for(var T=I(this.contextListeners),E=T.next();!E.done;E=T.next()){var v=E.value;this.contextListeners.delete(v)}}catch(O){s={error:O}}finally{try{E&&!E.done&&(o=T.return)&&o.call(T)}finally{if(s)throw s.error}}try{for(var b=I(this.doneListeners),D=b.next();!D.done;D=b.next()){var v=D.value;this.doneListeners.delete(v)}}catch(O){a={error:O}}finally{try{D&&!D.done&&(c=b.return)&&c.call(b)}finally{if(a)throw a.error}}if(!this.initialized)return this;$([],N(this.state.configuration),!1).sort(function(O,P){return P.order-O.order}).forEach(function(O){var P,j;try{for(var z=I(O.definition.exit),ee=z.next();!ee.done;ee=z.next()){var xe=ee.value;p.exec(xe,p.state)}}catch(Sr){P={error:Sr}}finally{try{ee&&!ee.done&&(j=z.return)&&j.call(z)}finally{if(P)throw P.error}}}),this.children.forEach(function(O){U(O.stop)&&O.stop()}),this.children.clear();try{for(var _=I(Object.keys(this.delayedEventsMap)),F=_.next();!F.done;F=_.next()){var x=F.value;this.clock.clearTimeout(this.delayedEventsMap[x])}}catch(O){l={error:O}}finally{try{F&&!F.done&&(u=_.return)&&u.call(_)}finally{if(l)throw l.error}}return this.scheduler.clear(),this.scheduler=new fi({deferEvents:this.options.deferEvents}),this.initialized=!1,this.status=J.Stopped,this._initialState=void 0,Bt.free(this.sessionId),this},t.prototype.batch=function(e){var r=this;if(!(this.status===J.NotStarted&&this.options.deferEvents)){if(this.status!==J.Running)throw new Error("".concat(e.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'))}this.scheduler.schedule(function(){var n,i,s=r.state,o=!1,a=[],c=function(f){var d=W(f);r.forward(d),s=ht(r,function(){return r.machine.transition(s,d)}),a.push.apply(a,$([],N(s.actions.map(function(v){return Bo(v,s)})),!1)),o=o||!!s.changed};try{for(var l=I(e),u=l.next();!u.done;u=l.next()){var p=u.value;c(p)}}catch(f){n={error:f}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}s.changed=o,s.actions=a,r.update(s,W(e[e.length-1]))})},t.prototype.sender=function(e){return this.send.bind(this,e)},t.prototype.nextState=function(e){var r=this,n=W(e);if(n.name.indexOf(xr)===0&&!this.state.nextEvents.some(function(s){return s.indexOf(xr)===0}))throw n.data.data;var i=ht(this,function(){return r.machine.transition(r.state,n)});return i},t.prototype.forward=function(e){var r,n;try{for(var i=I(this.forwardTo),s=i.next();!s.done;s=i.next()){var o=s.value,a=this.children.get(o);if(!a)throw new Error("Unable to forward event '".concat(e,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(o,"'."));a.send(e)}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.defer=function(e){var r=this;this.delayedEventsMap[e.id]=this.clock.setTimeout(function(){e.to?r.sendTo(e._event,e.to):r.send(e._event)},e.delay)},t.prototype.cancel=function(e){this.clock.clearTimeout(this.delayedEventsMap[e]),delete this.delayedEventsMap[e]},t.prototype.exec=function(e,r,n){n===void 0&&(n=this.machine.options.actions);var i=r.context,s=r._event,o=e.exec||jt(e.type,n),a=U(o)?o:o?o.exec:e.exec;if(a)try{return a(i,s.data,{action:e,state:this.state,_event:s})}catch(D){throw this.parent&&this.parent.send({type:"xstate.error",data:D}),D}switch(e.type){case it:var c=e;if(typeof c.delay=="number"){this.defer(c);return}else c.to?this.sendTo(c._event,c.to):this.send(c._event);break;case Ar:this.cancel(e.sendId);break;case Ot:{if(this.status!==J.Running)return;var l=e.activity;if(!this.state.activities[l.id||l.type])break;if(l.type===C.Invoke){var u=Wn(l.src),p=this.machine.options.services?this.machine.options.services[u.type]:void 0,f=l.id,d=l.data,v="autoForward"in l?l.autoForward:!!l.forward;if(!p)return;var h=d?Nt(d,i,s):void 0;if(typeof p=="string")return;var m=U(p)?p(i,s.data,{data:h,src:u,meta:l.meta}):p;if(!m)return;var T=void 0;Pe(m)&&(m=h?m.withContext(h):m,T={autoForward:v}),this.spawn(m,f,T)}else this.spawnActivity(l);break}case At:{this.stopChild(e.activity.id);break}case _t:var E=e.label,b=e.value;E?this.logger(E,b):this.logger(b);break}},t.prototype.removeChild=function(e){var r;this.children.delete(e),this.forwardTo.delete(e),(r=this.state)===null||r===void 0||delete r.children[e]},t.prototype.stopChild=function(e){var r=this.children.get(e);!r||(this.removeChild(e),U(r.stop)&&r.stop())},t.prototype.spawn=function(e,r,n){if(Bn(e))return this.spawnPromise(Promise.resolve(e),r);if(U(e))return this.spawnCallback(e,r);if(jo(e))return this.spawnActor(e,r);if(go(e))return this.spawnObservable(e,r);if(Pe(e))return this.spawnMachine(e,g(g({},n),{id:r}));if(mo(e))return this.spawnBehavior(e,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof e,'".'))},t.prototype.spawnMachine=function(e,r){var n=this;r===void 0&&(r={});var i=new t(e,g(g({},this.options),{parent:this,id:r.id||e.id})),s=g(g({},jr),r);s.sync&&i.onTransition(function(a){n.send(Rt,{state:a,id:i.id})});var o=i;return this.children.set(i.id,o),s.autoForward&&this.forwardTo.add(i.id),i.onDone(function(a){n.removeChild(i.id),n.send(W(a,{origin:i.id}))}).start(),o},t.prototype.spawnBehavior=function(e,r){var n=qo(e,{id:r,parent:this});return this.children.set(r,n),n},t.prototype.spawnPromise=function(e,r){var n,i=this,s=!1,o;e.then(function(c){s||(o=c,i.removeChild(r),i.send(W(dt(r,c),{origin:r})))},function(c){if(!s){i.removeChild(r);var l=Fe(r,c);try{i.send(W(l,{origin:r}))}catch{i.devTools&&i.devTools.send(l,i.state),i.machine.strict&&i.stop()}}});var a=(n={id:r,send:function(){},subscribe:function(c,l,u){var p=Ct(c,l,u),f=!1;return e.then(function(d){f||(p.next(d),!f&&p.complete())},function(d){f||p.error(d)}),{unsubscribe:function(){return f=!0}}},stop:function(){s=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return o}},n[Ee]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnCallback=function(e,r){var n,i=this,s=!1,o=new Set,a=new Set,c,l=function(f){c=f,a.forEach(function(d){return d(f)}),!s&&i.send(W(f,{origin:r}))},u;try{u=e(l,function(f){o.add(f)})}catch(f){this.send(Fe(r,f))}if(Bn(u))return this.spawnPromise(u,r);var p=(n={id:r,send:function(f){return o.forEach(function(d){return d(f)})},subscribe:function(f){var d=Ct(f);return a.add(d.next),{unsubscribe:function(){a.delete(d.next)}}},stop:function(){s=!0,U(u)&&u()},toJSON:function(){return{id:r}},getSnapshot:function(){return c}},n[Ee]=function(){return this},n);return this.children.set(r,p),p},t.prototype.spawnObservable=function(e,r){var n,i=this,s,o=e.subscribe(function(c){s=c,i.send(W(c,{origin:r}))},function(c){i.removeChild(r),i.send(W(Fe(r,c),{origin:r}))},function(){i.removeChild(r),i.send(W(dt(r),{origin:r}))}),a=(n={id:r,send:function(){},subscribe:function(c,l,u){return e.subscribe(c,l,u)},stop:function(){return o.unsubscribe()},getSnapshot:function(){return s},toJSON:function(){return{id:r}}},n[Ee]=function(){return this},n);return this.children.set(r,a),a},t.prototype.spawnActor=function(e,r){return this.children.set(r,e),e},t.prototype.spawnActivity=function(e){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[e.type]:void 0;if(!!r){var n=r(this.state.context,e);this.spawnEffect(e.id,n)}},t.prototype.spawnEffect=function(e,r){var n;this.children.set(e,(n={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:e}}},n[Ee]=function(){return this},n))},t.prototype.attachDev=function(){var e=Ur();if(this.options.devTools&&e){if(e.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=e.__REDUX_DEVTOOLS_EXTENSION__.connect(g(g({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:g({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}zo(this)}},t.prototype.toJSON=function(){return{id:this.id}},t.prototype[Ee]=function(){return this},t.prototype.getSnapshot=function(){return this.status===J.NotStarted?this.initialState:this._state},t.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(e,r){return setTimeout(e,r)},clearTimeout:function(e){return clearTimeout(e)}},logger:console.log.bind(console),devTools:!1},t.interpret=Re,t}(),Jo=function(t){return k(t)?g(g({},jr),{name:t}):g(g(g({},jr),{name:wo()}),t)};function Yo(t,e){var r=Jo(e);return No(function(n){return n?n.spawn(t,r.name,r):oi(t,r.name)})}function Re(t,e){var r=new Wo(t,e);return r}function Qo(t){if(typeof t=="string"){var e={type:t};return e.toString=function(){return t},e}return t}function Kt(t){return g(g({type:Pt},t),{toJSON:function(){t.onDone,t.onError;var e=Or(t,["onDone","onError"]);return g(g({},e),{type:Pt,src:Qo(t.src)})}})}var Be="",Lr="#",vt="*",Ke={},Ge=function(t){return t[0]===Lr},Xo=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Zo=function(t,e,r){var n=r.slice(0,-1).some(function(s){return!("cond"in s)&&!("in"in s)&&(k(s.target)||Pe(s.target))}),i=e===Be?"the transient event":"event '".concat(e,"'");ut(!n,"One or more transitions for ".concat(i," on state '").concat(t.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},ea=function(){function t(e,r,n,i){var s=this;n===void 0&&(n="context"in e?e.context:void 0);var o;this.config=e,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Xo(),r),this.parent=i==null?void 0:i.parent,this.key=this.config.key||(i==null?void 0:i.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Ln),this.id=this.config.id||$([this.machine.key],N(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(o=this.config.schema)!==null&&o!==void 0?o:{},this.description=this.config.description,this.initial=this.config.initial,this.states=this.config.states?at(this.config.states,function(l,u){var p,f=new t(l,{},void 0,{parent:s,key:u});return Object.assign(s.idMap,g((p={},p[f.id]=f,p),f.idMap)),f}):Ke;var a=0;function c(l){var u,p;l.order=a++;try{for(var f=I($e(l)),d=f.next();!d.done;d=f.next()){var v=d.value;c(v)}}catch(h){u={error:h}}finally{try{d&&!d.done&&(p=f.return)&&p.call(f)}finally{if(u)throw u.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(l){var u=l.event;return u===Be}):Be in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=ie(this.config.entry||this.config.onEntry).map(function(l){return Me(l)}),this.onExit=ie(this.config.exit||this.config.onExit).map(function(l){return Me(l)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=ie(this.config.invoke).map(function(l,u){var p,f;if(Pe(l)){var d=Ut(s.id,u);return s.machine.options.services=g((p={},p[d]=l,p),s.machine.options.services),Kt({src:d,id:d})}else if(k(l.src)){var d=l.id||Ut(s.id,u);return Kt(g(g({},l),{id:d,src:l.src}))}else if(Pe(l.src)||U(l.src)){var d=l.id||Ut(s.id,u);return s.machine.options.services=g((f={},f[d]=l.src,f),s.machine.options.services),Kt(g(g({id:d},l),{src:d}))}else{var v=l.src;return Kt(g(g({id:Ut(s.id,u)},l),{src:v}))}}),this.activities=ie(this.config.activities).concat(this.invoke).map(function(l){return Lt(l)}),this.transition=this.transition.bind(this),this.tags=ie(this.config.tags)}return t.prototype._init=function(){this.__cache.transitions||ai(this).forEach(function(e){return e.on})},t.prototype.withConfig=function(e,r){var n=this.options,i=n.actions,s=n.activities,o=n.guards,a=n.services,c=n.delays;return new t(this.config,{actions:g(g({},i),e.actions),activities:g(g({},s),e.activities),guards:g(g({},o),e.guards),services:g(g({},a),e.services),delays:g(g({},c),e.delays)},r!=null?r:this.context)},t.prototype.withContext=function(e){return new t(this.config,this.options,e)},Object.defineProperty(t.prototype,"context",{get:function(){return U(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:at(this.states,function(e){return e.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){return this.definition},Object.defineProperty(t.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var e=this.transitions;return this.__cache.on=e.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),t.prototype.getCandidates=function(e){if(this.__cache.candidates[e])return this.__cache.candidates[e];var r=e===Be,n=this.transitions.filter(function(i){var s=i.eventType===e;return r?s:s||i.eventType===vt});return this.__cache.candidates[e]=n,n},t.prototype.getDelayedTransitions=function(){var e=this,r=this.config.after;if(!r)return[];var n=function(s,o){var a=U(s)?"".concat(e.id,":delay[").concat(o,"]"):s,c=ii(a,e.id);return e.onEntry.push(we(c,{delay:s})),e.onExit.push(Zn(c)),c},i=je(r)?r.map(function(s,o){var a=n(s.delay,o);return g(g({},s),{event:a})}):L(Object.keys(r).map(function(s,o){var a=r[s],c=k(a)?{target:a}:a,l=isNaN(+s)?s:+s,u=n(l,o);return ie(c).map(function(p){return g(g({},p),{event:u,delay:l})})}));return i.map(function(s){var o=s.delay;return g(g({},e.formatTransition(s)),{delay:o})})},t.prototype.getStateNodes=function(e){var r,n=this;if(!e)return[];var i=e instanceof fe?e.value:ot(e,this.delimiter);if(k(i)){var s=this.getStateNode(i).initial;return s!==void 0?this.getStateNodes((r={},r[i]=s,r)):[this,this.states[i]]}var o=Object.keys(i),a=[this];return a.push.apply(a,$([],N(L(o.map(function(c){return n.getStateNode(c).getStateNodes(i[c])}))),!1)),a},t.prototype.handles=function(e){var r=Fn(e);return this.events.includes(r)},t.prototype.resolveState=function(e){var r=e instanceof fe?e:fe.create(e),n=Array.from(Ve([],this.getStateNodes(r.value)));return new fe(g(g({},r),{value:this.resolve(r.value),configuration:n,done:pt(n,this),tags:ci(n),machine:this.machine}))},t.prototype.transitionLeafNode=function(e,r,n){var i=this.getStateNode(e),s=i.next(r,n);return!s||!s.transitions.length?this.next(r,n):s},t.prototype.transitionCompoundNode=function(e,r,n){var i=Object.keys(e),s=this.getStateNode(i[0]),o=s._transition(e[i[0]],r,n);return!o||!o.transitions.length?this.next(r,n):o},t.prototype.transitionParallelNode=function(e,r,n){var i,s,o={};try{for(var a=I(Object.keys(e)),c=a.next();!c.done;c=a.next()){var l=c.value,u=e[l];if(!!u){var p=this.getStateNode(l),f=p._transition(u,r,n);f&&(o[l]=f)}}}catch(E){i={error:E}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(i)throw i.error}}var d=Object.keys(o).map(function(E){return o[E]}),v=L(d.map(function(E){return E.transitions})),h=d.some(function(E){return E.transitions.length>0});if(!h)return this.next(r,n);var m=L(d.map(function(E){return E.entrySet})),T=L(Object.keys(o).map(function(E){return o[E].configuration}));return{transitions:v,entrySet:m,exitSet:L(d.map(function(E){return E.exitSet})),configuration:T,source:r,actions:L(Object.keys(o).map(function(E){return o[E].actions}))}},t.prototype._transition=function(e,r,n){return k(e)?this.transitionLeafNode(e,r,n):Object.keys(e).length===1?this.transitionCompoundNode(e,r,n):this.transitionParallelNode(e,r,n)},t.prototype.getTransitionData=function(e,r){return this._transition(e.value,e,W(r))},t.prototype.next=function(e,r){var n,i,s=this,o=r.name,a=[],c=[],l;try{for(var u=I(this.getCandidates(o)),p=u.next();!p.done;p=u.next()){var f=p.value,d=f.cond,v=f.in,h=e.context,m=v?k(v)&&Ge(v)?e.matches(ot(this.getStateNodeById(v).path,this.delimiter)):Rr(ot(v,this.delimiter),ho(this.path.slice(0,-2))(e.value)):!0,T=!1;try{T=!d||qn(this.machine,d,h,r,e)}catch(_){throw new Error("Unable to evaluate guard '".concat(d.name||d.type,"' in transition for event '").concat(o,"' in state node '").concat(this.id,`':
`).concat(_.message))}if(T&&m){f.target!==void 0&&(c=f.target),a.push.apply(a,$([],N(f.actions),!1)),l=f;break}}}catch(_){n={error:_}}finally{try{p&&!p.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}if(!!l){if(!c.length)return{transitions:[l],entrySet:[],exitSet:[],configuration:e.value?[this]:[],source:e,actions:a};var E=L(c.map(function(_){return s.getRelativeStateNodes(_,e.historyValue)})),b=!!l.internal,D=b?[]:L(E.map(function(_){return s.nodesFromChild(_)}));return{transitions:[l],entrySet:D,exitSet:b?[]:[this],configuration:E,source:e,actions:a}}},t.prototype.nodesFromChild=function(e){if(e.escapes(this))return[];for(var r=[],n=e;n&&n!==this;)r.push(n),n=n.parent;return r.push(this),r},t.prototype.escapes=function(e){if(this===e)return!1;for(var r=this.parent;r;){if(r===e)return!1;r=r.parent}return!0},t.prototype.getActions=function(e,r,n,i){var s,o,a,c,l=Ve([],i?this.getStateNodes(i.value):[this]),u=e.configuration.length?Ve(l,e.configuration):l;try{for(var p=I(u),f=p.next();!f.done;f=p.next()){var d=f.value;Vt(l,d)||e.entrySet.push(d)}}catch(x){s={error:x}}finally{try{f&&!f.done&&(o=p.return)&&o.call(p)}finally{if(s)throw s.error}}try{for(var v=I(l),h=v.next();!h.done;h=v.next()){var d=h.value;(!Vt(u,d)||Vt(e.exitSet,d.parent))&&e.exitSet.push(d)}}catch(x){a={error:x}}finally{try{h&&!h.done&&(c=v.return)&&c.call(v)}finally{if(a)throw a.error}}var m=L(e.entrySet.map(function(x){var O=[];if(x.type!=="final")return O;var P=x.parent;if(!P.parent)return O;O.push(ft(x.id,x.doneData),ft(P.id,x.doneData?Nt(x.doneData,r,n):void 0));var j=P.parent;return j.type==="parallel"&&$e(j).every(function(z){return pt(e.configuration,z)})&&O.push(ft(j.id)),O}));e.exitSet.sort(function(x,O){return O.order-x.order}),e.entrySet.sort(function(x,O){return x.order-O.order});var T=new Set(e.entrySet),E=new Set(e.exitSet),b=N([L(Array.from(T).map(function(x){return $($([],N(x.activities.map(function(O){return ei(O)})),!1),N(x.onEntry),!1)})).concat(m.map(Jn)),L(Array.from(E).map(function(x){return $($([],N(x.onExit),!1),N(x.activities.map(function(O){return ti(O)})),!1)}))],2),D=b[0],_=b[1],F=lt(_.concat(e.actions).concat(D),this.machine.options.actions);return F},t.prototype.transition=function(e,r,n){e===void 0&&(e=this.initialState);var i=W(r),s;if(e instanceof fe)s=n===void 0?e:this.resolveState(fe.from(e,n));else{var o=k(e)?this.resolve(kt(this.getResolvedPath(e))):this.resolve(e),a=n!=null?n:this.machine.context;s=this.resolveState(fe.from(o,a))}if(!st&&i.name===vt)throw new Error("An event cannot have the wildcard type ('".concat(vt,"')"));if(this.strict&&!this.events.includes(i.name)&&!vo(i.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(i.name,"'"));var c=this._transition(s.value,s,i)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:s,actions:[]},l=Ve([],this.getStateNodes(s.value)),u=c.configuration.length?Ve(l,c.configuration):l;return c.configuration=$([],N(u),!1),this.resolveTransition(c,s,s.context,i)},t.prototype.resolveRaisedTransition=function(e,r,n){var i,s=e.actions;return e=this.transition(e,r),e._event=n,e.event=n.data,(i=e.actions).unshift.apply(i,$([],N(s),!1)),e},t.prototype.resolveTransition=function(e,r,n,i){var s,o,a=this;i===void 0&&(i=ct);var c=e.configuration,l=!r||e.transitions.length>0,u=l?Mo(this.machine,c):void 0,p=r?r.historyValue?r.historyValue:e.source?this.machine.historyValue(r.value):void 0:void 0,f=this.getActions(e,n,i,r),d=r?g({},r.activities):{};try{for(var v=I(f),h=v.next();!h.done;h=v.next()){var m=h.value;m.type===Ot?d[m.activity.id||m.activity.type]=m:m.type===At&&(d[m.activity.id||m.activity.type]=!1)}}catch(te){s={error:te}}finally{try{h&&!h.done&&(o=v.return)&&o.call(v)}finally{if(s)throw s.error}}var T=N(Mt(this,r,n,i,f,this.machine.config.preserveActionOrder),2),E=T[0],b=T[1],D=N(Kn(E,function(te){return te.type===nt||te.type===it&&te.to===_e.Internal}),2),_=D[0],F=D[1],x=E.filter(function(te){var rt;return te.type===Ot&&((rt=te.activity)===null||rt===void 0?void 0:rt.type)===Pt}),O=x.reduce(function(te,rt){return te[rt.activity.id]=Co(rt.activity,a.machine,b,i),te},r?g({},r.children):{}),P=l?e.configuration:r?r.configuration:[],j=pt(P,this),z=new fe({value:u||r.value,context:b,_event:i,_sessionid:r?r._sessionid:null,historyValue:u?p?yo(p,u):void 0:r?r.historyValue:void 0,history:!u||e.source?r:void 0,actions:u?F:[],activities:u?d:r?r.activities:{},events:[],configuration:P,transitions:e.transitions,children:O,done:j,tags:ci(P),machine:this}),ee=n!==b;z.changed=i.name===Rt||ee;var xe=z.history;xe&&delete xe.history;var Sr=!j&&(this._transient||c.some(function(te){return te._transient}));if(!l&&(!Sr||i.name===Be))return z;var le=z;if(!j)for(Sr&&(le=this.resolveRaisedTransition(le,{type:Nn},i));_.length;){var ff=_.shift();le=this.resolveRaisedTransition(le,ff._event,i)}var df=le.changed||(xe?!!le.actions.length||ee||typeof xe.value!=typeof le.value||!li(le.value,xe.value):void 0);return le.changed=df,le.history=xe,le},t.prototype.getStateNode=function(e){if(Ge(e))return this.machine.getStateNodeById(e);if(!this.states)throw new Error("Unable to retrieve child state '".concat(e,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[e];if(!r)throw new Error("Child state '".concat(e,"' does not exist on '").concat(this.id,"'"));return r},t.prototype.getStateNodeById=function(e){var r=Ge(e)?e.slice(Lr.length):e;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},t.prototype.getStateNodeByPath=function(e){if(typeof e=="string"&&Ge(e))try{return this.getStateNodeById(e.slice(1))}catch{}for(var r=Ir(e,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},t.prototype.resolve=function(e){var r,n=this;if(!e)return this.initialStateValue||Ke;switch(this.type){case"parallel":return at(this.initialStateValue,function(s,o){return s?n.getStateNode(o).resolve(e[o]||s):Ke});case"compound":if(k(e)){var i=this.getStateNode(e);return i.type==="parallel"||i.type==="compound"?(r={},r[e]=i.initialStateValue,r):e}return Object.keys(e).length?at(e,function(s,o){return s?n.getStateNode(o).resolve(s):Ke}):this.initialStateValue||{};default:return e||Ke}},t.prototype.getResolvedPath=function(e){if(Ge(e)){var r=this.machine.idMap[e.slice(Lr.length)];if(!r)throw new Error("Unable to find state node '".concat(e,"'"));return r.path}return Ir(e,this.delimiter)},Object.defineProperty(t.prototype,"initialStateValue",{get:function(){var e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=$n(this.states,function(n){return n.initialStateValue||Ke},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=$t(this.states[this.initial])?this.initial:(e={},e[this.initial]=this.states[this.initial].initialStateValue,e)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),t.prototype.getInitialState=function(e,r){this._init();var n=this.getStateNodes(e);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r!=null?r:this.machine.context,void 0)},Object.defineProperty(t.prototype,"initialState",{get:function(){var e=this.initialStateValue;if(!e)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){var e;if(this.type==="history"){var r=this.config;k(r.target)?e=Ge(r.target)?kt(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:e=r.target}return e},enumerable:!1,configurable:!0}),t.prototype.getRelativeStateNodes=function(e,r,n){return n===void 0&&(n=!0),n?e.type==="history"?e.resolveHistory(r):e.initialStateNodes:[e]},Object.defineProperty(t.prototype,"initialStateNodes",{get:function(){var e=this;if($t(this))return[this];if(this.type==="compound"&&!this.initial)return st||ut(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=Dt(this.initialStateValue);return L(r.map(function(n){return e.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),t.prototype.getFromRelativePath=function(e){if(!e.length)return[this];var r=N(e),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var s=this.getStateNode(n);if(s.type==="history")return s.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},t.prototype.historyValue=function(e){if(!!Object.keys(this.states).length)return{current:e||this.initialStateValue,states:$n(this.states,function(r,n){if(!e)return r.historyValue();var i=k(e)?void 0:e[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},t.prototype.resolveHistory=function(e){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!e){var i=this.target;return i?L(Dt(i).map(function(o){return n.getFromRelativePath(o)})):n.initialStateNodes}var s=po(n.path,"states")(e).current;return k(s)?[n.getStateNode(s)]:L(Dt(s).map(function(o){return r.history==="deep"?n.getFromRelativePath(o):[n.states[o[0]]]}))},Object.defineProperty(t.prototype,"stateIds",{get:function(){var e=this,r=L(Object.keys(this.states).map(function(n){return e.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"events",{get:function(){var e,r,n,i;if(this.__cache.events)return this.__cache.events;var s=this.states,o=new Set(this.ownEvents);if(s)try{for(var a=I(Object.keys(s)),c=a.next();!c.done;c=a.next()){var l=c.value,u=s[l];if(u.states)try{for(var p=(n=void 0,I(u.events)),f=p.next();!f.done;f=p.next()){var d=f.value;o.add("".concat(d))}}catch(v){n={error:v}}finally{try{f&&!f.done&&(i=p.return)&&i.call(p)}finally{if(n)throw n.error}}}}catch(v){e={error:v}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return this.__cache.events=Array.from(o)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ownEvents",{get:function(){var e=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(e)},enumerable:!1,configurable:!0}),t.prototype.resolveTarget=function(e){var r=this;if(e!==void 0)return e.map(function(n){if(!k(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var s=i?r.key+n:n;if(r.parent)try{var o=r.parent.getStateNodeByPath(s);return o}catch(a){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(a.message))}else return r.getStateNodeByPath(s)})},t.prototype.formatTransition=function(e){var r=this,n=So(e.target),i="internal"in e?e.internal:n?n.some(function(c){return k(c)&&c[0]===r.delimiter}):!0,s=this.machine.options.guards,o=this.resolveTarget(n),a=g(g({},e),{actions:lt(ie(e.actions)),cond:zn(e.cond,s),target:o,source:this,internal:i,eventType:e.event,toJSON:function(){return g(g({},a),{target:a.target?a.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return a},t.prototype.formatTransitions=function(){var e,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var s=this.config.on,o=vt,a=s[o],c=a===void 0?[]:a,l=Or(s,[typeof o=="symbol"?o:o+""]);i=L(Object.keys(l).map(function(E){!st&&E===Be&&ut(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var b=Le(E,l[E]);return st||Zo(n,E,b),b}).concat(Le(vt,c)))}var u=this.config.always?Le("",this.config.always):[],p=this.config.onDone?Le(String(ft(this.id)),this.config.onDone):[];st||ut(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var f=L(this.invoke.map(function(E){var b=[];return E.onDone&&b.push.apply(b,$([],N(Le(String(dt(E.id)),E.onDone)),!1)),E.onError&&b.push.apply(b,$([],N(Le(String(Fe(E.id)),E.onError)),!1)),b})),d=this.after,v=L($($($($([],N(p),!1),N(f),!1),N(i),!1),N(u),!1).map(function(E){return ie(E).map(function(b){return n.formatTransition(b)})}));try{for(var h=I(d),m=h.next();!m.done;m=h.next()){var T=m.value;v.push(T)}}catch(E){e={error:E}}finally{try{m&&!m.done&&(r=h.return)&&r.call(h)}finally{if(e)throw e.error}}return v},t}();function Se(t,e){return new ea(t,e)}var R=ni,B=we,Mr={exports:{}},di=function(e,r){return function(){for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];return e.apply(r,i)}},ta=di,Fr=Object.prototype.toString,$r=function(t){return function(e){var r=Fr.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function Ie(t){return t=t.toLowerCase(),function(r){return $r(r)===t}}function Vr(t){return Array.isArray(t)}function Gt(t){return typeof t=="undefined"}function ra(t){return t!==null&&!Gt(t)&&t.constructor!==null&&!Gt(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}var hi=Ie("ArrayBuffer");function na(t){var e;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&hi(t.buffer),e}function ia(t){return typeof t=="string"}function sa(t){return typeof t=="number"}function pi(t){return t!==null&&typeof t=="object"}function Ht(t){if($r(t)!=="object")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}var oa=Ie("Date"),aa=Ie("File"),ua=Ie("Blob"),ca=Ie("FileList");function Br(t){return Fr.call(t)==="[object Function]"}function la(t){return pi(t)&&Br(t.pipe)}function fa(t){var e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||Fr.call(t)===e||Br(t.toString)&&t.toString()===e)}var da=Ie("URLSearchParams");function ha(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function pa(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Kr(t,e){if(!(t===null||typeof t=="undefined"))if(typeof t!="object"&&(t=[t]),Vr(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}function Gr(){var t={};function e(i,s){Ht(t[s])&&Ht(i)?t[s]=Gr(t[s],i):Ht(i)?t[s]=Gr({},i):Vr(i)?t[s]=i.slice():t[s]=i}for(var r=0,n=arguments.length;r<n;r++)Kr(arguments[r],e);return t}function va(t,e,r){return Kr(e,function(i,s){r&&typeof i=="function"?t[s]=ta(i,r):t[s]=i}),t}function ma(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}function ya(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)}function ga(t,e,r){var n,i,s,o={};e=e||{};do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)s=n[i],o[s]||(e[s]=t[s],o[s]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e}function Ea(t,e,r){t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return n!==-1&&n===r}function wa(t){if(!t)return null;var e=t.length;if(Gt(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r}var Sa=function(t){return function(e){return t&&e instanceof t}}(typeof Uint8Array!="undefined"&&Object.getPrototypeOf(Uint8Array)),G={isArray:Vr,isArrayBuffer:hi,isBuffer:ra,isFormData:fa,isArrayBufferView:na,isString:ia,isNumber:sa,isObject:pi,isPlainObject:Ht,isUndefined:Gt,isDate:oa,isFile:aa,isBlob:ua,isFunction:Br,isStream:la,isURLSearchParams:da,isStandardBrowserEnv:pa,forEach:Kr,merge:Gr,extend:va,trim:ha,stripBOM:ma,inherits:ya,toFlatObject:ga,kindOf:$r,kindOfTest:Ie,endsWith:Ea,toArray:wa,isTypedArray:Sa,isFileList:ca},He=G;function vi(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var mi=function(e,r,n){if(!r)return e;var i;if(n)i=n(r);else if(He.isURLSearchParams(r))i=r.toString();else{var s=[];He.forEach(r,function(c,l){c===null||typeof c=="undefined"||(He.isArray(c)?l=l+"[]":c=[c],He.forEach(c,function(p){He.isDate(p)?p=p.toISOString():He.isObject(p)&&(p=JSON.stringify(p)),s.push(vi(l)+"="+vi(p))}))}),i=s.join("&")}if(i){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e},Ta=G;function zt(){this.handlers=[]}zt.prototype.use=function(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1},zt.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},zt.prototype.forEach=function(e){Ta.forEach(this.handlers,function(n){n!==null&&e(n)})};var ba=zt,Oa=G,Aa=function(e,r){Oa.forEach(e,function(i,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(e[r]=i,delete e[s])})},yi=G;function ze(t,e,r,n,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}yi.inherits(ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var gi=ze.prototype,Ei={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(t){Ei[t]={value:t}}),Object.defineProperties(ze,Ei),Object.defineProperty(gi,"isAxiosError",{value:!0}),ze.from=function(t,e,r,n,i,s){var o=Object.create(gi);return yi.toFlatObject(t,o,function(c){return c!==Error.prototype}),ze.call(o,t.message,e,r,n,i),o.name=t.name,s&&Object.assign(o,s),o};var qe=ze,wi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},se=G;function xa(t,e){e=e||new FormData;var r=[];function n(s){return s===null?"":se.isDate(s)?s.toISOString():se.isArrayBuffer(s)||se.isTypedArray(s)?typeof Blob=="function"?new Blob([s]):Buffer.from(s):s}function i(s,o){if(se.isPlainObject(s)||se.isArray(s)){if(r.indexOf(s)!==-1)throw Error("Circular reference detected in "+o);r.push(s),se.forEach(s,function(c,l){if(!se.isUndefined(c)){var u=o?o+"."+l:l,p;if(c&&!o&&typeof c=="object"){if(se.endsWith(l,"{}"))c=JSON.stringify(c);else if(se.endsWith(l,"[]")&&(p=se.toArray(c))){p.forEach(function(f){!se.isUndefined(f)&&e.append(u,n(f))});return}}i(c,u)}}),r.pop()}else e.append(o,n(s))}return i(t),e}var Si=xa,Hr=qe,_a=function(e,r,n){var i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):r(new Hr("Request failed with status code "+n.status,[Hr.ERR_BAD_REQUEST,Hr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))},qt=G,Pa=qt.isStandardBrowserEnv()?function(){return{write:function(r,n,i,s,o,a){var c=[];c.push(r+"="+encodeURIComponent(n)),qt.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),qt.isString(s)&&c.push("path="+s),qt.isString(o)&&c.push("domain="+o),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Ra=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)},Ia=function(e,r){return r?e.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):e},ka=Ra,Da=Ia,Ti=function(e,r){return e&&!ka(r)?Da(e,r):r},zr=G,Na=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ca=function(e){var r={},n,i,s;return e&&zr.forEach(e.split(`
`),function(a){if(s=a.indexOf(":"),n=zr.trim(a.substr(0,s)).toLowerCase(),i=zr.trim(a.substr(s+1)),n){if(r[n]&&Na.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([i]):r[n]=r[n]?r[n]+", "+i:i}}),r},bi=G,Ua=bi.isStandardBrowserEnv()?function(){var e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function i(s){var o=s;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(o){var a=bi.isString(o)?i(o):o;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}(),qr=qe,ja=G;function Oi(t){qr.call(this,t==null?"canceled":t,qr.ERR_CANCELED),this.name="CanceledError"}ja.inherits(Oi,qr,{__CANCEL__:!0});var Wt=Oi,La=function(e){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return r&&r[1]||""},mt=G,Ma=_a,Fa=Pa,$a=mi,Va=Ti,Ba=Ca,Ka=Ua,Ga=wi,pe=qe,Ha=Wt,za=La,Ai=function(e){return new Promise(function(n,i){var s=e.data,o=e.headers,a=e.responseType,c;function l(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}mt.isFormData(s)&&mt.isStandardBrowserEnv()&&delete o["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var p=e.auth.username||"",f=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(p+":"+f)}var d=Va(e.baseURL,e.url);u.open(e.method.toUpperCase(),$a(d,e.params,e.paramsSerializer),!0),u.timeout=e.timeout;function v(){if(!!u){var T="getAllResponseHeaders"in u?Ba(u.getAllResponseHeaders()):null,E=!a||a==="text"||a==="json"?u.responseText:u.response,b={data:E,status:u.status,statusText:u.statusText,headers:T,config:e,request:u};Ma(function(_){n(_),l()},function(_){i(_),l()},b),u=null}}if("onloadend"in u?u.onloadend=v:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(v)},u.onabort=function(){!u||(i(new pe("Request aborted",pe.ECONNABORTED,e,u)),u=null)},u.onerror=function(){i(new pe("Network Error",pe.ERR_NETWORK,e,u,u)),u=null},u.ontimeout=function(){var E=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",b=e.transitional||Ga;e.timeoutErrorMessage&&(E=e.timeoutErrorMessage),i(new pe(E,b.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,e,u)),u=null},mt.isStandardBrowserEnv()){var h=(e.withCredentials||Ka(d))&&e.xsrfCookieName?Fa.read(e.xsrfCookieName):void 0;h&&(o[e.xsrfHeaderName]=h)}"setRequestHeader"in u&&mt.forEach(o,function(E,b){typeof s=="undefined"&&b.toLowerCase()==="content-type"?delete o[b]:u.setRequestHeader(b,E)}),mt.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),a&&a!=="json"&&(u.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&u.addEventListener("progress",e.onDownloadProgress),typeof e.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(c=function(T){!u||(i(!T||T&&T.type?new Ha:T),u.abort(),u=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c))),s||(s=null);var m=za(d);if(m&&["http","https","file"].indexOf(m)===-1){i(new pe("Unsupported protocol "+m+":",pe.ERR_BAD_REQUEST,e));return}u.send(s)})},qa=null,K=G,xi=Aa,_i=qe,Wa=wi,Ja=Si,Ya={"Content-Type":"application/x-www-form-urlencoded"};function Pi(t,e){!K.isUndefined(t)&&K.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function Qa(){var t;return(typeof XMLHttpRequest!="undefined"||typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]")&&(t=Ai),t}function Xa(t,e,r){if(K.isString(t))try{return(e||JSON.parse)(t),K.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}var Jt={transitional:Wa,adapter:Qa(),transformRequest:[function(e,r){if(xi(r,"Accept"),xi(r,"Content-Type"),K.isFormData(e)||K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return Pi(r,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n=K.isObject(e),i=r&&r["Content-Type"],s;if((s=K.isFileList(e))||n&&i==="multipart/form-data"){var o=this.env&&this.env.FormData;return Ja(s?{"files[]":e}:e,o&&new o)}else if(n||i==="application/json")return Pi(r,"application/json"),Xa(e);return e}],transformResponse:[function(e){var r=this.transitional||Jt.transitional,n=r&&r.silentJSONParsing,i=r&&r.forcedJSONParsing,s=!n&&this.responseType==="json";if(s||i&&K.isString(e)&&e.length)try{return JSON.parse(e)}catch(o){if(s)throw o.name==="SyntaxError"?_i.from(o,_i.ERR_BAD_RESPONSE,this,null,this.response):o}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:qa},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};K.forEach(["delete","get","head"],function(e){Jt.headers[e]={}}),K.forEach(["post","put","patch"],function(e){Jt.headers[e]=K.merge(Ya)});var Wr=Jt,Za=G,eu=Wr,tu=function(e,r,n){var i=this||eu;return Za.forEach(n,function(o){e=o.call(i,e,r)}),e},Ri=function(e){return!!(e&&e.__CANCEL__)},Ii=G,Jr=tu,ru=Ri,nu=Wr,iu=Wt;function Yr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new iu}var su=function(e){Yr(e),e.headers=e.headers||{},e.data=Jr.call(e,e.data,e.headers,e.transformRequest),e.headers=Ii.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ii.forEach(["delete","get","head","post","put","patch","common"],function(i){delete e.headers[i]});var r=e.adapter||nu.adapter;return r(e).then(function(i){return Yr(e),i.data=Jr.call(e,i.data,i.headers,e.transformResponse),i},function(i){return ru(i)||(Yr(e),i&&i.response&&(i.response.data=Jr.call(e,i.response.data,i.response.headers,e.transformResponse))),Promise.reject(i)})},Q=G,ki=function(e,r){r=r||{};var n={};function i(u,p){return Q.isPlainObject(u)&&Q.isPlainObject(p)?Q.merge(u,p):Q.isPlainObject(p)?Q.merge({},p):Q.isArray(p)?p.slice():p}function s(u){if(Q.isUndefined(r[u])){if(!Q.isUndefined(e[u]))return i(void 0,e[u])}else return i(e[u],r[u])}function o(u){if(!Q.isUndefined(r[u]))return i(void 0,r[u])}function a(u){if(Q.isUndefined(r[u])){if(!Q.isUndefined(e[u]))return i(void 0,e[u])}else return i(void 0,r[u])}function c(u){if(u in r)return i(e[u],r[u]);if(u in e)return i(void 0,e[u])}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:c};return Q.forEach(Object.keys(e).concat(Object.keys(r)),function(p){var f=l[p]||s,d=f(p);Q.isUndefined(d)&&f!==c||(n[p]=d)}),n},Di={version:"0.27.2"},ou=Di.version,Te=qe,Qr={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Qr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});var Ni={};Qr.transitional=function(e,r,n){function i(s,o){return"[Axios v"+ou+"] Transitional option '"+s+"'"+o+(n?". "+n:"")}return function(s,o,a){if(e===!1)throw new Te(i(o," has been removed"+(r?" in "+r:"")),Te.ERR_DEPRECATED);return r&&!Ni[o]&&(Ni[o]=!0,console.warn(i(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(s,o,a):!0}};function au(t,e,r){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var s=n[i],o=e[s];if(o){var a=t[s],c=a===void 0||o(a,s,t);if(c!==!0)throw new Te("option "+s+" must be "+c,Te.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Te("Unknown option "+s,Te.ERR_BAD_OPTION)}}var uu={assertOptions:au,validators:Qr},Ci=G,cu=mi,Ui=ba,ji=su,Yt=ki,lu=Ti,Li=uu,We=Li.validators;function Je(t){this.defaults=t,this.interceptors={request:new Ui,response:new Ui}}Je.prototype.request=function(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Yt(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var n=r.transitional;n!==void 0&&Li.assertOptions(n,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1);var i=[],s=!0;this.interceptors.request.forEach(function(d){typeof d.runWhen=="function"&&d.runWhen(r)===!1||(s=s&&d.synchronous,i.unshift(d.fulfilled,d.rejected))});var o=[];this.interceptors.response.forEach(function(d){o.push(d.fulfilled,d.rejected)});var a;if(!s){var c=[ji,void 0];for(Array.prototype.unshift.apply(c,i),c=c.concat(o),a=Promise.resolve(r);c.length;)a=a.then(c.shift(),c.shift());return a}for(var l=r;i.length;){var u=i.shift(),p=i.shift();try{l=u(l)}catch(f){p(f);break}}try{a=ji(l)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a},Je.prototype.getUri=function(e){e=Yt(this.defaults,e);var r=lu(e.baseURL,e.url);return cu(r,e.params,e.paramsSerializer)},Ci.forEach(["delete","get","head","options"],function(e){Je.prototype[e]=function(r,n){return this.request(Yt(n||{},{method:e,url:r,data:(n||{}).data}))}}),Ci.forEach(["post","put","patch"],function(e){function r(n){return function(s,o,a){return this.request(Yt(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}Je.prototype[e]=r(),Je.prototype[e+"Form"]=r(!0)});var fu=Je,du=Wt;function Ye(t){if(typeof t!="function")throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(i){e=i});var r=this;this.promise.then(function(n){if(!!r._listeners){var i,s=r._listeners.length;for(i=0;i<s;i++)r._listeners[i](n);r._listeners=null}}),this.promise.then=function(n){var i,s=new Promise(function(o){r.subscribe(o),i=o}).then(n);return s.cancel=function(){r.unsubscribe(i)},s},t(function(i){r.reason||(r.reason=new du(i),e(r.reason))})}Ye.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},Ye.prototype.subscribe=function(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]},Ye.prototype.unsubscribe=function(e){if(!!this._listeners){var r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}},Ye.source=function(){var e,r=new Ye(function(i){e=i});return{token:r,cancel:e}};var hu=Ye,pu=function(e){return function(n){return e.apply(null,n)}},vu=G,mu=function(e){return vu.isObject(e)&&e.isAxiosError===!0},Mi=G,yu=di,Qt=fu,gu=ki,Eu=Wr;function Fi(t){var e=new Qt(t),r=yu(Qt.prototype.request,e);return Mi.extend(r,Qt.prototype,e),Mi.extend(r,e),r.create=function(i){return Fi(gu(t,i))},r}var Y=Fi(Eu);Y.Axios=Qt,Y.CanceledError=Wt,Y.CancelToken=hu,Y.isCancel=Ri,Y.VERSION=Di.version,Y.toFormData=Si,Y.AxiosError=qe,Y.Cancel=Y.CanceledError,Y.all=function(e){return Promise.all(e)},Y.spread=pu,Y.isAxiosError=mu,Mr.exports=Y,Mr.exports.default=Y;var yt=Mr.exports;/*! js-cookie v3.0.1 | MIT */function Xt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t}var wu={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function Xr(t,e){function r(i,s,o){if(typeof document!="undefined"){o=Xt({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in o)!o[c]||(a+="; "+c,o[c]!==!0&&(a+="="+o[c].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+a}}function n(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var c=s[a].split("="),l=c.slice(1).join("=");try{var u=decodeURIComponent(c[0]);if(o[u]=t.read(l,u),i===u)break}catch{}}return i?o[i]:o}}return Object.create({set:r,get:n,remove:function(i,s){r(i,"",Xt({},s,{expires:-1}))},withAttributes:function(i){return Xr(this.converter,Xt({},this.attributes,i))},withConverter:function(i){return Xr(Xt({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var Zr=Xr(wu,{path:"/"}),Su=Object.defineProperty,Tu=Object.defineProperties,bu=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,$i=Object.prototype.hasOwnProperty,Vi=Object.prototype.propertyIsEnumerable,Bi=(t,e,r)=>e in t?Su(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,re=(t,e)=>{for(var r in e||(e={}))$i.call(e,r)&&Bi(t,r,e[r]);if(Zt)for(var r of Zt(e))Vi.call(e,r)&&Bi(t,r,e[r]);return t},ve=(t,e)=>Tu(t,bu(e)),Ki=(t,e)=>{var r={};for(var n in t)$i.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&Zt)for(var n of Zt(t))e.indexOf(n)<0&&Vi.call(t,n)&&(r[n]=t[n]);return r};function Ou(t){return new TextEncoder().encode(t)}function ke(t){const e=new Uint8Array(t);let r="";for(const i of e)r+=String.fromCharCode(i);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function en(t){const e=t.replace(/-/g,"+").replace(/_/g,"/"),r=(4-e.length%4)%4,n=e.padEnd(e.length+r,"="),i=atob(n),s=new ArrayBuffer(i.length),o=new Uint8Array(s);for(let a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return s}function Gi(){return(window==null?void 0:window.PublicKeyCredential)!==void 0&&typeof window.PublicKeyCredential=="function"}function Hi(t){const{id:e}=t;return ve(re({},t),{id:en(e),transports:t.transports})}function zi(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}class H extends Error{constructor(e,r="WebAuthnError"){super(e),this.name=r}}function Au({error:t,options:e}){var r,n;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new H("Registration ceremony was sent an abort signal","AbortError")}else if(t.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new H("Discoverable credentials were required but no available authenticator supported it","ConstraintError");if(((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new H("User verification was required but no available authenticator supported it","ConstraintError")}else{if(t.name==="InvalidStateError")return new H("The authenticator was previously registered","InvalidStateError");if(t.name==="NotAllowedError")return new H("User clicked cancel, or the registration ceremony timed out","NotAllowedError");if(t.name==="NotSupportedError")return i.pubKeyCredParams.filter(o=>o.type==="public-key").length===0?new H('No entry in pubKeyCredParams was of type "public-key"',"NotSupportedError"):new H("No available authenticator supported any of the specified pubKeyCredParams algorithms","NotSupportedError");if(t.name==="SecurityError"){const s=window.location.hostname;if(zi(s)){if(i.rp.id!==s)return new H(`The RP ID "${i.rp.id}" is invalid for this domain`,"SecurityError")}else return new H(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new H("User ID was not between 1 and 64 characters","TypeError")}else if(t.name==="UnknownError")return new H("The authenticator was unable to process the specified options, or could not create a new credential","UnknownError")}return t}class xu{createNewAbortSignal(){return this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal}reset(){this.controller=void 0}}const er=new xu;async function qi(t){if(!Gi())throw new Error("WebAuthn is not supported in this browser");const r={publicKey:ve(re({},t),{challenge:en(t.challenge),user:ve(re({},t.user),{id:Ou(t.user.id)}),excludeCredentials:t.excludeCredentials.map(Hi)})};r.signal=er.createNewAbortSignal();let n;try{n=await navigator.credentials.create(r)}catch(l){throw Au({error:l,options:r})}finally{er.reset()}if(!n)throw new Error("Registration was not completed");const{id:i,rawId:s,response:o,type:a}=n,c={id:i,rawId:ke(s),response:{attestationObject:ke(o.attestationObject),clientDataJSON:ke(o.clientDataJSON)},type:a,clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:n.authenticatorAttachment};return typeof o.getTransports=="function"&&(c.transports=o.getTransports()),c}function _u(t){return new TextDecoder("utf-8").decode(t)}async function Pu(){if(navigator.credentials.conditionalMediationSupported)return!0;const t=window.PublicKeyCredential;return t.isConditionalMediationAvailable!==void 0&&t.isConditionalMediationAvailable()}function Ru({error:t,options:e}){var r;const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal===new AbortController().signal)return new H("Authentication ceremony was sent an abort signal","AbortError")}else{if(t.name==="NotAllowedError")return!((r=n.allowCredentials)===null||r===void 0)&&r.length?new H("No available authenticator recognized any of the allowed credentials","NotAllowedError"):new H("User clicked cancel, or the authentication ceremony timed out","NotAllowedError");if(t.name==="SecurityError"){const i=window.location.hostname;if(zi(i)){if(n.rpId!==i)return new H(`The RP ID "${n.rpId}" is invalid for this domain`,"SecurityError")}else return new H(`${window.location.hostname} is an invalid domain`,"SecurityError")}else if(t.name==="UnknownError")return new H("The authenticator was unable to process the specified options, or could not create a new assertion signature","UnknownError")}return t}async function Iu(t,e=!1){var r,n;if(!Gi())throw new Error("WebAuthn is not supported in this browser");let i;((r=t.allowCredentials)===null||r===void 0?void 0:r.length)!==0&&(i=(n=t.allowCredentials)===null||n===void 0?void 0:n.map(Hi));const s=ve(re({},t),{challenge:en(t.challenge),allowCredentials:i}),o={};if(e){if(!await Pu())throw Error("Browser does not support WebAuthn autofill");if(document.querySelectorAll("input[autocomplete*='webauthn']").length<1)throw Error('No <input> with `"webauthn"` in its `autocomplete` attribute was detected');o.mediation="conditional",s.allowCredentials=[]}o.publicKey=s,o.signal=er.createNewAbortSignal();let a;try{a=await navigator.credentials.get(o)}catch(d){throw Ru({error:d,options:o})}finally{er.reset()}if(!a)throw new Error("Authentication was not completed");const{id:c,rawId:l,response:u,type:p}=a;let f;return u.userHandle&&(f=_u(u.userHandle)),{id:c,rawId:ke(l),response:{authenticatorData:ke(u.authenticatorData),clientDataJSON:ke(u.clientDataJSON),signature:ke(u.signature),userHandle:f},type:p,clientExtensionResults:a.getClientExtensionResults(),authenticatorAttachment:a.authenticatorAttachment}}const tr="nhostRefreshToken",rr="nhostRefreshTokenExpiresAt",ku=3,Du=300,Nu=5,Cu=0,Uu=1,de=10,nr=20;class ir extends Error{constructor(e){super(e.message),Error.captureStackTrace(this,this.constructor),e instanceof Error?(this.name=e.name,this.error={error:e.name,status:Uu,message:e.message}):(this.name=e.error,this.error=e)}}const be={status:de,error:"invalid-email",message:"Email is incorrectly formatted"},ju={status:de,error:"invalid-mfa-type",message:"MFA type is invalid"},Lu={status:de,error:"invalid-mfa-code",message:"MFA code is invalid"},tn={status:de,error:"invalid-password",message:"Password is incorrectly formatted"},Wi={status:de,error:"invalid-phone-number",message:"Phone number is incorrectly formatted"},Mu={status:de,error:"invalid-mfa-ticket",message:"MFA ticket is invalid"},Fu={status:de,error:"no-mfa-ticket",message:"No MFA ticket has been provided"},$u={status:de,error:"no-refresh-token",message:"No refresh token has been provided"},Vu={status:nr,error:"refresher-already-running",message:"The token refresher is already running. You must wait until is has finished before submitting a new token."},me={status:nr,error:"already-signed-in",message:"User is already signed in"},Bu={status:nr,error:"unauthenticated-user",message:"User is not authenticated"},Ku={status:nr,error:"unverified-user",message:"Email needs verification"},Gu={status:de,error:"invalid-refresh-token",message:"Invalid or expired refresh token"},De=t=>{const e=yt.create({baseURL:t});return e.interceptors.response.use(r=>r,r=>{var n,i,s,o,a,c,l,u,p,f;return Promise.reject({error:{message:(a=(o=(s=(i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)!=null?s:r.message)!=null?o:r.request.responseText)!=null?a:JSON.stringify(r),status:(p=(u=(c=r.response)==null?void 0:c.status)!=null?u:(l=r.response)==null?void 0:l.data.statusCode)!=null?p:Cu,error:((f=r.response)==null?void 0:f.data.error)||r.request.statusText||"network"}})}),e},sr=typeof window!="undefined",or=new Map,Hu=t=>{var e;return sr&&typeof localStorage!="undefined"?localStorage.getItem(t):(e=or.get(t))!=null?e:null},zu=(t,e)=>{sr&&typeof localStorage!="undefined"?e?localStorage.setItem(t,e):localStorage.removeItem(t):e?or.set(t,e):or.has(t)&&or.delete(t)},qu=(t,e)=>{if(t==="localStorage"||t==="web")return Hu;if(t==="cookie")return r=>{var n;return sr&&(n=Zr.get(r))!=null?n:null};if(!e)throw Error(`clientStorageType is set to '${t}' but no clientStorage has been given`);if(t==="react-native")return r=>{var n;return(n=e.getItem)==null?void 0:n.call(e,r)};if(t==="capacitor")return r=>{var n;return(n=e.get)==null?void 0:n.call(e,{key:r})};if(t==="expo-secure-storage")return r=>{var n;return(n=e.getItemAsync)==null?void 0:n.call(e,r)};if(t==="custom"){if(e.getItem&&e.removeItem)return e.getItem;if(e.getItemAsync)return e.getItemAsync;throw Error(`clientStorageType is set to 'custom' but clientStorage is missing either "getItem" and "removeItem" properties or "getItemAsync" property`)}throw Error(`Unknown storage type: ${t}`)},Wu=(t,e)=>{if(t==="localStorage"||t==="web")return zu;if(t==="cookie")return(r,n)=>{sr&&(n?Zr.set(r,n,{expires:30}):Zr.remove(r))};if(!e)throw Error(`clientStorageType is set to '${t}' but no clienStorage has been given`);if(t==="react-native")return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(t==="capacitor")return(r,n)=>{var i,s;return n?(i=e.set)==null?void 0:i.call(e,{key:r,value:n}):(s=e.remove)==null?void 0:s.call(e,{key:r})};if(t==="expo-secure-storage")return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.deleteItemAsync)==null?void 0:s.call(e,r)};if(t==="custom"){if(!e.removeItem)throw Error("clientStorageType is set to 'custom' but clientStorage is missing a removeItem property");if(e.setItem)return(r,n)=>{var i,s;return n?(i=e.setItem)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};if(e.setItemAsync)return async(r,n)=>{var i,s;return n?(i=e.setItemAsync)==null?void 0:i.call(e,r,n):(s=e.removeItem)==null?void 0:s.call(e,r)};throw Error("clientStorageType is set to 'custom' but clientStorage is missing setItem or setItemAsync property")}throw Error(`Unknown storage type: ${t}`)},rn=(t,e)=>{const r=e&&Object.entries(e).map(([n,i])=>{const s=Array.isArray(i)?i.join(","):typeof i=="object"?JSON.stringify(i):i;return`${n}=${encodeURIComponent(s)}`}).join("&");return r?`${t}?${r}`:t},oe=(t,e)=>{if(!(e!=null&&e.redirectTo))return e;const r=e,{redirectTo:n}=r,i=Ki(r,["redirectTo"]);if(!t)return n.startsWith("/")?i:e;const s=new URL(t),o=Object.fromEntries(new URLSearchParams(s.search)),a=new URL(n.startsWith("/")?s.origin+n:n),c=new URLSearchParams(a.search);let l=Object.fromEntries(c);n.startsWith("/")&&(l=re(re({},o),l));let u=s.pathname;return a.pathname.length>1&&(u+=a.pathname.slice(1)),ve(re({},i),{redirectTo:rn(a.origin+u,l)})};function ar(t,e){var r;if(!e){if(typeof window=="undefined")return;e=((r=window.location)==null?void 0:r.href)||""}t=t.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function Ji(t){var e;if(typeof window=="undefined")return;const r=window==null?void 0:window.location;if(!!r&&r){const n=new URLSearchParams(r.search),i=new URLSearchParams((e=r.hash)==null?void 0:e.slice(1));n.delete(t),i.delete(t);let s=window.location.pathname;Array.from(n).length&&(s+=`?${n.toString()}`),Array.from(i).length&&(s+=`#${i.toString()}`),window.history.pushState({},"",s)}}const Oe=t=>!!t&&typeof t=="string"&&!!String(t).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),nn=t=>!!t&&typeof t=="string"&&t.length>=ku,Yi=t=>!!t&&typeof t=="string",Ju=t=>t&&typeof t=="string"&&t.match(/^mfaTotp:[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i),sn={user:null,mfa:null,accessToken:{value:null,expiresAt:null},refreshTimer:{startedAt:null,attempts:0,lastAttempt:null},refreshToken:{value:null},errors:{}},Qi=({backendUrl:t,clientUrl:e,interpreter:r})=>{const n=De(t);return Se({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changeEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:R({error:i=>be}),saveRequestError:R({error:(i,{data:{error:s}})=>s}),reportError:B(i=>({type:"ERROR",error:i.error})),reportSuccess:B("SUCCESS")},guards:{invalidEmail:(i,{email:s})=>!Oe(s)},services:{requestChange:async(i,{email:s,options:o})=>(await n.post("/user/email/change",{newEmail:s,options:oe(e,o)},{headers:{authorization:`Bearer ${r==null?void 0:r.state.context.accessToken.value}`}})).data}})},Xi=({backendUrl:t,interpreter:e})=>{const r=De(t);return Se({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidPassword",actions:"saveInvalidPasswordError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidPasswordError:R({error:n=>tn}),saveRequestError:R({error:(n,{data:{error:i}})=>i}),reportError:B(n=>({type:"ERROR",error:n.error})),reportSuccess:B("SUCCESS")},guards:{invalidPassword:(n,{password:i})=>!nn(i)},services:{requestChange:(n,{password:i,ticket:s})=>r.post("/user/password",{newPassword:i,ticket:s},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}})}})},Yu=({backendUrl:t,interpreter:e})=>{const r=De(t);return Se({schema:{context:{},events:{}},tsTypes:{},preserveActionOrder:!0,id:"enableMfa",initial:"idle",context:{error:null,imageUrl:null,secret:null},states:{idle:{initial:"initial",on:{GENERATE:"generating"},states:{initial:{},error:{}}},generating:{invoke:{src:"generate",id:"generate",onDone:{target:"generated",actions:["reportGeneratedSuccess","saveGeneration"]},onError:{actions:["saveError","reportGeneratedError"],target:"idle.error"}}},generated:{initial:"idle",states:{idle:{initial:"idle",on:{ACTIVATE:[{cond:"invalidMfaType",actions:"saveInvalidMfaTypeError",target:".error"},{cond:"invalidMfaCode",actions:"saveInvalidMfaCodeError",target:".error"},{target:"activating"}]},states:{idle:{},error:{}}},activating:{invoke:{src:"activate",id:"activate",onDone:{target:"activated",actions:"reportSuccess"},onError:{actions:["saveError","reportError"],target:"idle.error"}}},activated:{type:"final"}}}}},{actions:{saveInvalidMfaTypeError:R({error:n=>ju}),saveInvalidMfaCodeError:R({error:n=>Lu}),saveError:R({error:(n,{data:{error:i}})=>i}),saveGeneration:R({imageUrl:(n,{data:{imageUrl:i}})=>i,secret:(n,{data:{totpSecret:i}})=>i}),reportError:B(n=>({type:"ERROR",error:n.error})),reportSuccess:B("SUCCESS"),reportGeneratedSuccess:B("GENERATED"),reportGeneratedError:B(n=>({type:"GENERATED_ERROR",error:n.error}))},guards:{invalidMfaCode:(n,{code:i})=>!i,invalidMfaType:(n,{activeMfaType:i})=>!i||i!=="totp"},services:{generate:async n=>{const{data:i}=await r.get("/mfa/totp/generate",{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}});return i},activate:(n,{code:i,activeMfaType:s})=>r.post("/user/mfa",{code:i,activeMfaType:s},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}})}})},Zi=({backendUrl:t,clientUrl:e})=>{const r=De(t);return Se({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"changePassword",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"requestChange",id:"requestChange",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:R({error:n=>be}),saveRequestError:R({error:(n,{data:{error:i}})=>i}),reportError:B(n=>({type:"ERROR",error:n.error})),reportSuccess:B("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!Oe(i)},services:{requestChange:(n,{email:i,options:s})=>r.post("/user/password/reset",{email:i,options:oe(e,s)})}})},es=({backendUrl:t,clientUrl:e})=>{const r=De(t);return Se({schema:{context:{},events:{},services:{}},tsTypes:{},preserveActionOrder:!0,id:"sendVerificationEmail",initial:"idle",context:{error:null},states:{idle:{on:{REQUEST:[{cond:"invalidEmail",actions:"saveInvalidEmailError",target:".error"},{target:"requesting"}]},initial:"initial",states:{initial:{},success:{},error:{}}},requesting:{invoke:{src:"request",id:"request",onDone:{target:"idle.success",actions:"reportSuccess"},onError:{actions:["saveRequestError","reportError"],target:"idle.error"}}}}},{actions:{saveInvalidEmailError:R({error:n=>be}),saveRequestError:R({error:(n,{data:{error:i}})=>i}),reportError:B(n=>({type:"ERROR",error:n.error})),reportSuccess:B("SUCCESS")},guards:{invalidEmail:(n,{email:i})=>!Oe(i)},services:{request:async(n,{email:i,options:s})=>(await r.post("/user/email/send-verification-email",{email:i,options:oe(e,s)})).data}})},Qu=({backendUrl:t,clientUrl:e,clientStorageGetter:r,clientStorageSetter:n,clientStorageType:i="web",clientStorage:s,refreshIntervalTime:o,autoRefreshToken:a=!0,autoSignIn:c=!0})=>{const l=r||qu(i,s),u=n||Wu(i,s),p=De(t),f=async(d,v,h)=>(await p.post(d,v,h)).data;return Se({schema:{context:{},events:{},services:{}},tsTypes:{},context:sn,preserveActionOrder:!0,id:"nhost",type:"parallel",states:{authentication:{initial:"starting",on:{SESSION_UPDATE:[{cond:"hasSession",actions:["saveSession","resetTimer","reportTokenChanged"],target:".signedIn"}]},states:{starting:{entry:"resetErrors",tags:["loading"],always:{cond:"isSignedIn",target:"signedIn"},invoke:{id:"importRefreshToken",src:"importRefreshToken",onDone:{actions:["saveSession","reportTokenChanged"],target:"signedIn"},onError:{actions:["saveAuthenticationError"],target:"signedOut"}}},signedOut:{initial:"noErrors",entry:"reportSignedOut",states:{noErrors:{},success:{},needsSmsOtp:{},needsMfa:{},failed:{},signingOut:{entry:["clearContextExceptRefreshToken"],exit:["destroyRefreshToken","reportTokenChanged"],invoke:{src:"signout",id:"signingOut",onDone:{target:"success"},onError:{target:"failed",actions:["saveAuthenticationError"]}}}},on:{SIGNIN_PASSWORD:"authenticating.password",SIGNIN_ANONYMOUS:"authenticating.anonymous",SIGNIN_SECURITY_KEY_EMAIL:"authenticating.securityKeyEmail",SIGNIN_MFA_TOTP:"authenticating.mfa.totp"}},authenticating:{entry:"resetErrors",states:{password:{invoke:{src:"signInPassword",id:"authenticateUserWithPassword",onDone:[{cond:"hasMfaTicket",actions:["saveMfaTicket"],target:"#nhost.authentication.signedOut.needsMfa"},{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"}],onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}},anonymous:{invoke:{src:"signInAnonymous",id:"authenticateAnonymously",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}}},mfa:{states:{totp:{invoke:{src:"signInMfaTotp",id:"signInMfaTotp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:["saveAuthenticationError"],target:"#nhost.authentication.signedOut.failed"}}}}},securityKeyEmail:{invoke:{src:"signInSecurityKeyEmail",id:"authenticateUserWithSecurityKey",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:[{cond:"unverified",target:["#nhost.authentication.signedOut","#nhost.registration.incomplete.needsEmailVerification"]},{actions:"saveAuthenticationError",target:"#nhost.authentication.signedOut.failed"}]}}}},signedIn:{type:"parallel",entry:["reportSignedIn","cleanUrl","broadcastToken","resetErrors"],on:{SIGNOUT:"signedOut.signingOut"},states:{refreshTimer:{id:"timer",initial:"idle",states:{disabled:{type:"final"},stopped:{always:{cond:"noToken",target:"idle"}},idle:{always:[{cond:"isAutoRefreshDisabled",target:"disabled"},{cond:"hasRefreshToken",target:"running"}]},running:{initial:"pending",entry:"resetTimer",states:{pending:{after:{"1000":{internal:!1,target:"pending"}},always:{cond:"refreshTimerShouldRefresh",target:"refreshing"}},refreshing:{invoke:{src:"refreshToken",id:"refreshToken",onDone:{actions:["saveSession","resetTimer","reportTokenChanged"],target:"pending"},onError:[{actions:"saveRefreshAttempt",target:"pending"}]}}}}}}}}}},token:{initial:"idle",states:{idle:{on:{TRY_TOKEN:"running"},initial:"noErrors",states:{noErrors:{},error:{}}},running:{invoke:{src:"refreshToken",id:"authenticateWithToken",onDone:{actions:["saveSession","reportTokenChanged"],target:["#nhost.authentication.signedIn","idle.noErrors"]},onError:[{cond:"isSignedIn",target:"idle.error"},{actions:"saveAuthenticationError",target:["#nhost.authentication.signedOut.failed","idle.error"]}]}}}},registration:{initial:"incomplete",on:{SIGNED_IN:[{cond:"isAnonymous",target:".incomplete"},".complete"]},states:{incomplete:{on:{SIGNUP_EMAIL_PASSWORD:"emailPassword",SIGNUP_SECURITY_KEY:"securityKey",PASSWORDLESS_EMAIL:"passwordlessEmail",PASSWORDLESS_SMS:"passwordlessSms",PASSWORDLESS_SMS_OTP:"passwordlessSmsOtp"},initial:"noErrors",states:{noErrors:{},needsEmailVerification:{},needsOtp:{},failed:{}}},emailPassword:{entry:["resetErrors"],invoke:{src:"signUpEmailPassword",id:"signUpEmailPassword",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},securityKey:{entry:["resetErrors"],invoke:{src:"signUpSecurityKey",id:"signUpSecurityKey",onDone:[{cond:"hasSession",actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]}],onError:[{cond:"unverified",target:"incomplete.needsEmailVerification"},{actions:"saveRegistrationError",target:"incomplete.failed"}]}},passwordlessEmail:{entry:["resetErrors"],invoke:{src:"passwordlessEmail",id:"passwordlessEmail",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsEmailVerification"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSms:{entry:["resetErrors"],invoke:{src:"passwordlessSms",id:"passwordlessSms",onDone:{actions:"clearContext",target:["#nhost.authentication.signedOut","incomplete.needsOtp"]},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},passwordlessSmsOtp:{entry:["resetErrors"],invoke:{src:"passwordlessSmsOtp",id:"passwordlessSmsOtp",onDone:{actions:["saveSession","reportTokenChanged"],target:"#nhost.authentication.signedIn"},onError:{actions:"saveRegistrationError",target:"incomplete.failed"}}},complete:{on:{SIGNED_OUT:"incomplete"}}}}}},{actions:{reportSignedIn:B("SIGNED_IN"),reportSignedOut:B("SIGNED_OUT"),reportTokenChanged:B("TOKEN_CHANGED"),clearContext:R(()=>(u(rr,null),u(tr,null),re({},sn))),clearContextExceptRefreshToken:R(({refreshToken:{value:d}})=>(u(rr,null),ve(re({},sn),{refreshToken:{value:d}}))),saveSession:R({user:(d,{data:v})=>{var h;return((h=v==null?void 0:v.session)==null?void 0:h.user)||null},accessToken:(d,{data:v})=>{if(v.session){const{accessTokenExpiresIn:h,accessToken:m}=v.session,T=new Date(Date.now()+h*1e3);return u(rr,T.toISOString()),{value:m,expiresAt:T}}return u(rr,null),{value:null,expiresAt:null}},refreshToken:(d,{data:v})=>{var h;const m=((h=v.session)==null?void 0:h.refreshToken)||null;return m&&u(tr,m),{value:m}}}),saveMfaTicket:R({mfa:(d,v)=>{var h;return(h=v.data)==null?void 0:h.mfa}}),resetTimer:R({refreshTimer:d=>({startedAt:new Date,attempts:0,lastAttempt:null})}),saveRefreshAttempt:R({refreshTimer:(d,v)=>({startedAt:d.refreshTimer.startedAt,attempts:d.refreshTimer.attempts+1,lastAttempt:new Date})}),saveAuthenticationError:R({errors:({errors:d},{data:{error:v}})=>ve(re({},d),{authentication:v})}),resetErrors:R({errors:d=>({})}),saveRegistrationError:R({errors:({errors:d},{data:{error:v}})=>ve(re({},d),{registration:v})}),destroyRefreshToken:R({refreshToken:d=>(u(tr,null),{value:null})}),cleanUrl:()=>{c&&ar("refreshToken")&&(Ji("refreshToken"),Ji("type"))},broadcastToken:d=>{if(c)try{new BroadcastChannel("nhost").postMessage(d.refreshToken.value)}catch{}}},guards:{isAnonymous:(d,v)=>{var h;return!!((h=d.user)!=null&&h.isAnonymous)},isSignedIn:d=>!!d.user&&!!d.refreshToken.value&&!!d.accessToken.value,noToken:d=>!d.refreshToken.value,hasRefreshToken:d=>!!d.refreshToken.value,isAutoRefreshDisabled:()=>!a,refreshTimerShouldRefresh:d=>{const{expiresAt:v}=d.accessToken;return v?d.refreshTimer.lastAttempt?Date.now()-d.refreshTimer.lastAttempt.getTime()>Nu*1e3:o&&Date.now()-d.refreshTimer.startedAt.getTime()>o*1e3?!0:v.getTime()-Date.now()-1e3*Du<=0:!1},unverified:(d,{data:{error:v}})=>v.status===401&&(v.message==="Email is not verified"||v.error==="unverified-user"),hasSession:(d,v)=>{var h;return!!((h=v.data)!=null&&h.session)},hasMfaTicket:(d,v)=>{var h;return!!((h=v.data)!=null&&h.mfa)}},services:{signInPassword:(d,{email:v,password:h})=>Oe(v)?nn(h)?f("/signin/email-password",{email:v,password:h}):Promise.reject({error:tn}):Promise.reject({error:be}),passwordlessSms:(d,{phoneNumber:v,options:h})=>{var m;return Yi(v)?(m=d.user)!=null&&m.isAnonymous?(console.warn("Deanonymisation from a phone number is not yet implemented in hasura-auth"),f("/user/deanonymize",{signInMethod:"passwordless",connection:"sms",phoneNumber:v,options:oe(e,h)},{headers:{authorization:`Bearer ${d.accessToken.value}`}})):f("/signin/passwordless/sms",{phoneNumber:v,options:oe(e,h)}):Promise.reject({error:Wi})},passwordlessSmsOtp:(d,{phoneNumber:v,otp:h})=>Yi(v)?f("/signin/passwordless/sms/otp",{phoneNumber:v,otp:h}):Promise.reject({error:Wi}),passwordlessEmail:(d,{email:v,options:h})=>{var m;return Oe(v)?(m=d.user)!=null&&m.isAnonymous?f("/user/deanonymize",{signInMethod:"passwordless",connection:"email",email:v,options:oe(e,h)},{headers:{authorization:`Bearer ${d.accessToken.value}`}}):f("/signin/passwordless/email",{email:v,options:oe(e,h)}):Promise.reject({error:be})},signInAnonymous:d=>f("/signin/anonymous"),signInMfaTotp:(d,v)=>{var h;const m=v.ticket||((h=d.mfa)==null?void 0:h.ticket);return m?Ju(m)?f("/signin/mfa/totp",{ticket:m,otp:v.otp}):Promise.reject({error:Mu}):Promise.reject({error:Fu})},signInSecurityKeyEmail:async(d,{email:v})=>{if(!Oe(v))throw new ir(be);const h=await f("/signin/webauthn",{email:v});let m;try{m=await Iu(h)}catch(T){throw new ir(T)}return f("/signin/webauthn/verify",{email:v,credential:m})},refreshToken:async(d,v)=>{const h=v.type==="TRY_TOKEN"?v.token:d.refreshToken.value;return{session:await f("/token",{refreshToken:h}),error:null}},signout:(d,v)=>f("/signout",{refreshToken:d.refreshToken.value,all:!!v.all}),signUpEmailPassword:async(d,{email:v,password:h,options:m})=>{var T;return Oe(v)?nn(h)?(T=d.user)!=null&&T.isAnonymous?f("/user/deanonymize",{signInMethod:"email-password",email:v,password:h,options:oe(e,m)},{headers:{authorization:`Bearer ${d.accessToken.value}`}}):f("/signup/email-password",{email:v,password:h,options:oe(e,m)}):Promise.reject({error:tn}):Promise.reject({error:be})},signUpSecurityKey:async(d,{email:v,options:h})=>{if(!Oe(v))return Promise.reject({error:be});const m=h==null?void 0:h.nickname;m&&delete h.nickname;const T=await f("/signup/webauthn",{email:v,options:h});let E;try{E=await qi(T)}catch(b){throw new ir(b)}return f("/signup/webauthn/verify",{credential:E,options:{redirectTo:h==null?void 0:h.redirectTo,nickname:m}})},importRefreshToken:async()=>{let d=null;if(c){const h=ar("refreshToken")||null;if(h)try{return{session:await f("/token",{refreshToken:h}),error:null}}catch(m){d=m.error}else{const m=ar("error");if(m)return Promise.reject({session:null,error:{status:de,error:m,message:ar("errorDescription")||m}})}}const v=await l(tr);if(v)try{return{session:await f("/token",{refreshToken:v}),error:null}}catch(h){d=h.error}return Promise.reject({error:d})}}})};class Xu{constructor(e){var r=e,{clientStorageType:n="web",autoSignIn:i=!0,autoRefreshToken:s=!0,start:o=!0,backendUrl:a,clientUrl:c,devTools:l}=r,u=Ki(r,["clientStorageType","autoSignIn","autoRefreshToken","start","backendUrl","clientUrl","devTools"]);if(this._subscriptions=new Set,this.backendUrl=a,this.clientUrl=c,this.machine=Qu(ve(re({},u),{backendUrl:a,clientUrl:c,clientStorageType:n,autoSignIn:i,autoRefreshToken:s})),o&&(this.interpreter=Re(this.machine,{devTools:l}),this.interpreter.start()),typeof window!="undefined"&&i)try{this._channel=new BroadcastChannel("nhost"),this._channel.addEventListener("message",p=>{var f;const d=(f=this.interpreter)==null?void 0:f.state.context.refreshToken.value;this.interpreter&&p.data!==d&&this.interpreter.send("TRY_TOKEN",{token:p.data})})}catch{}}get interpreter(){return this._interpreter}set interpreter(e){this._interpreter=e,e&&this._subscriptions.forEach(r=>r(this))}onStart(e){this.interpreter?e(this):this._subscriptions.add(e)}}const ts=async({backendUrl:t,interpreter:e},r)=>{const n=De(t);try{const{data:i}=await n.post("/user/webauthn/add",{},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}});let s;try{s=await qi(i)}catch(a){throw new ir(a)}const{data:o}=await n.post("/user/webauthn/verify",{credential:s,nickname:r},{headers:{authorization:`Bearer ${e==null?void 0:e.state.context.accessToken.value}`}});return{key:o,isError:!1,error:null,isSuccess:!0}}catch(i){const{error:s}=i;return{isError:!0,error:s,isSuccess:!1}}},rs=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,needsEmailVerification:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,needsEmailVerification:!0})})}),ns=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{password:e,ticket:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSuccess:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSuccess:!0})})}),Zu=t=>new Promise(e=>{t.send("GENERATE"),t.onTransition(r=>{r.matches("generated")?e({error:null,isError:!1,isGenerated:!0,qrCodeDataUrl:r.context.imageUrl||""}):r.matches({idle:"error"})&&e({error:r.context.error||null,isError:!0,isGenerated:!1,qrCodeDataUrl:""})})}),ec=(t,e)=>new Promise(r=>{t.send("ACTIVATE",{activeMfaType:"totp",code:e}),t.onTransition(n=>{n.matches({generated:"activated"})?r({error:null,isActivated:!0,isError:!1}):n.matches({generated:{idle:"error"}})&&r({error:n.context.error,isActivated:!1,isError:!0})})}),is=async(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),ss=(t,e,r)=>new Promise(n=>{t.send("REQUEST",{email:e,options:r}),t.onTransition(i=>{i.matches({idle:"error"})?n({error:i.context.error,isError:!0,isSent:!1}):i.matches({idle:"success"})&&n({error:null,isError:!1,isSent:!0})})}),os=t=>new Promise(e=>{const{changed:r}=t.send("SIGNIN_ANONYMOUS");r||e({isSuccess:!1,isError:!0,error:me,user:null,accessToken:null}),t.onTransition(n=>{n.matches({authentication:"signedIn"})&&e({isSuccess:!0,isError:!1,error:null,user:n.context.user,accessToken:n.context.accessToken.value}),n.matches({authentication:{signedOut:"failed"}})&&e({isSuccess:!1,isError:!0,error:n.context.errors.authentication||null,user:null,accessToken:null})})}),as=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_PASSWORD",{email:e,password:r});if(!i)return n({accessToken:s.accessToken.value,error:me,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:{signedOut:"needsMfa"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!0,mfa:o.context.mfa,user:null}):o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,needsMfaOtp:!1,mfa:null,user:o.context.user})})}),on=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_EMAIL",{email:e,options:r});if(!i)return n({error:me,isError:!0,isSuccess:!1});t.onTransition(s=>{s.matches("registration.incomplete.failed")?n({error:s.context.errors.registration||null,isError:!0,isSuccess:!1}):s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})&&n({error:null,isError:!1,isSuccess:!0})})}),us=(t,e)=>new Promise(r=>{const{changed:n,context:i}=t.send({type:"SIGNIN_SECURITY_KEY_EMAIL",email:e});if(!n)return r({accessToken:i.accessToken.value,error:me,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:i.user});t.onTransition(s=>{s.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?r({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):s.matches({authentication:{signedOut:"failed"}})?r({accessToken:null,error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):s.matches({authentication:"signedIn"})&&r({accessToken:s.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:s.context.user})})}),cs=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNIN_MFA_TOTP",{otp:e,ticket:r});if(!i)return n({accessToken:s.accessToken.value,error:me,isError:!0,isSuccess:!1,user:s.user});t.onTransition(o=>{o.matches({authentication:{signedOut:"failed"}})?n({accessToken:null,error:o.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null}):o.matches({authentication:"signedIn"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,user:o.context.user})})}),an=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send("PASSWORDLESS_SMS",{phoneNumber:e,options:r});if(!i)return n({error:me,isError:!0,isSuccess:!1,needsOtp:!1});t.onTransition(s=>{s.matches("registration.incomplete.needsOtp")?n({error:null,isError:!1,isSuccess:!1,needsOtp:!0}):s.matches("registration.incomplete.failed")&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,needsOtp:!1})})}),un=(t,e,r)=>new Promise(n=>{const{changed:i}=t.send({type:"PASSWORDLESS_SMS_OTP",phoneNumber:e,otp:r});if(!i)return n({error:me,isError:!0,isSuccess:!1,user:null,accessToken:null});t.onTransition(s=>{s.matches({authentication:"signedIn"})?n({error:null,isError:!1,isSuccess:!0,user:s.context.user,accessToken:s.context.accessToken.value}):s.matches({registration:{incomplete:"failed"}})&&n({error:s.context.errors.authentication||null,isError:!0,isSuccess:!1,user:null,accessToken:null})})}),ls=async(t,e)=>new Promise(r=>{const{event:n}=t.send("SIGNOUT",{all:e});if(n.type!=="SIGNED_OUT")return r({isSuccess:!1,isError:!0,error:Bu});t.onTransition(i=>{i.matches({authentication:{signedOut:"success"}})?r({isSuccess:!0,isError:!1,error:null}):i.matches("authentication.signedOut.failed")&&r({isSuccess:!1,isError:!0,error:i.context.errors.signout||null})})}),cn=(t,e,r,n)=>new Promise(i=>{const{changed:s,context:o}=t.send("SIGNUP_EMAIL_PASSWORD",{email:e,password:r,options:n});if(!s)return i({error:me,accessToken:o.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:o.user});t.onTransition(a=>{a.matches("registration.incomplete.failed")?i({accessToken:null,error:a.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):a.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?i({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):a.matches({authentication:"signedIn",registration:"complete"})&&i({accessToken:a.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:a.context.user})})}),fs=(t,e,r)=>new Promise(n=>{const{changed:i,context:s}=t.send("SIGNUP_SECURITY_KEY",{email:e,options:r});if(!i)return n({error:me,accessToken:s.accessToken.value,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:s.user});t.onTransition(o=>{o.matches("registration.incomplete.failed")?n({accessToken:null,error:o.context.errors.registration||null,isError:!0,isSuccess:!1,needsEmailVerification:!1,user:null}):o.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}})?n({accessToken:null,error:null,isError:!1,isSuccess:!1,needsEmailVerification:!0,user:null}):o.matches({authentication:"signedIn",registration:"complete"})&&n({accessToken:o.context.accessToken.value,error:null,isError:!1,isSuccess:!0,needsEmailVerification:!1,user:o.context.user})})});var tc=Object.defineProperty,rc=Object.defineProperties,nc=Object.getOwnPropertyDescriptors,ds=Object.getOwnPropertySymbols,ic=Object.prototype.hasOwnProperty,sc=Object.prototype.propertyIsEnumerable,hs=(t,e,r)=>e in t?tc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gt=(t,e)=>{for(var r in e||(e={}))ic.call(e,r)&&hs(t,r,e[r]);if(ds)for(var r of ds(e))sc.call(e,r)&&hs(t,r,e[r]);return t},Et=(t,e)=>rc(t,nc(e));const oc=()=>typeof window!="undefined",ur=t=>!t||!t.accessToken.value||!t.refreshToken.value||!t.accessToken.expiresAt||!t.user?null:{accessToken:t.accessToken.value,accessTokenExpiresIn:(t.accessToken.expiresAt.getTime()-Date.now())/1e3,refreshToken:t.refreshToken.value,user:t.user},Ne=({accessToken:t,isError:e,user:r,error:n})=>e?{session:null,error:n}:r&&t?{session:{accessToken:t,accessTokenExpiresIn:0,refreshToken:"",user:r},error:null}:{session:null,error:null};class ac{constructor({url:e,autoRefreshToken:r=!0,autoSignIn:n=!0,autoLogin:i,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:c,refreshIntervalTime:l,start:u=!0}){var p;this.url=e,this._client=new Xu({backendUrl:e,clientUrl:typeof window!="undefined"&&((p=window.location)==null?void 0:p.origin)||"",autoRefreshToken:r,autoSignIn:typeof i=="boolean"?i:n,start:u,clientStorage:s,clientStorageType:o,clientStorageGetter:a,clientStorageSetter:c,refreshIntervalTime:l})}async signUp(e){const r=await this.waitUntilReady(),{email:n,options:i}=e;return"securityKey"in e?Ne(await fs(r,n,i)):Ne(await cn(r,n,e.password,i))}async signIn(e){const r=await this.waitUntilReady();if("provider"in e){const{provider:i,options:s}=e,o=rn(`${this._client.backendUrl}/signin/provider/${i}`,oe(this._client.clientUrl,s));return oc()&&(window.location.href=o),{providerUrl:o,provider:i,session:null,mfa:null,error:null}}if("email"in e&&"password"in e){const i=await as(r,e.email,e.password);return i.needsEmailVerification?{session:null,mfa:null,error:Ku}:i.needsMfaOtp?{session:null,mfa:i.mfa,error:null}:Et(gt({},Ne(i)),{mfa:null})}if("email"in e&&"securityKey"in e){if(e.securityKey!==!0)throw Error("securityKey must be true");const i=await us(r,e.email);return Et(gt({},Ne(i)),{mfa:null})}if("email"in e){const{email:i,options:s}=e,{error:o}=await on(r,i,s);return{session:null,mfa:null,error:o}}if("phoneNumber"in e&&"otp"in e){const i=await un(r,e.phoneNumber,e.otp);return Et(gt({},Ne(i)),{mfa:null})}if("phoneNumber"in e){const{error:i}=await an(r,e.phoneNumber,e.options);return{error:i,mfa:null,session:null}}if("otp"in e){const i=await cs(r,e.otp,e.ticket);return Et(gt({},Ne(i)),{mfa:null})}const n=await os(r);return Et(gt({},Ne(n)),{mfa:null})}async signOut(e){const r=await this.waitUntilReady(),{error:n}=await ls(r,e==null?void 0:e.all);return{error:n}}async resetPassword({email:e,options:r}){const n=Re(Zi(this._client)).start(),{error:i}=await is(n,e,r);return{error:i}}async changePassword({newPassword:e,ticket:r}){const n=Re(Xi(this._client)).start(),{error:i}=await ns(n,e,r);return{error:i}}async sendVerificationEmail({email:e,options:r}){const n=Re(es(this._client)).start(),{error:i}=await ss(n,e,r);return{error:i}}async changeEmail({newEmail:e,options:r}){const n=Re(Qi(this._client)).start(),{error:i}=await rs(n,e,r);return{error:i}}async deanonymize(e){const r=await this.waitUntilReady();if(e.signInMethod==="passwordless"){if(e.connection==="email"){const{error:n}=await on(r,e.email,e.options);return{error:n}}if(e.connection==="sms"){const{error:n}=await an(r,e.phoneNumber,e.options);return{error:n}}}if(e.signInMethod==="email-password"){const{error:n}=await cn(r,e.email,e.password,e.options);return{error:n}}throw Error("Unknown deanonymization method")}async addSecurityKey(e){const{error:r,key:n}=await ts(this._client,e);return{error:r,key:n}}onTokenChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{i.type==="TOKEN_CHANGED"&&e(ur(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onTokenChanged was added before the interpreter started. Cannot unsubscribe listener.")}}onAuthStateChanged(e){const r=n=>n.onTransition(({event:i,context:s})=>{(i.type==="SIGNED_IN"||i.type==="SIGNED_OUT")&&e(i.type,ur(s))});if(this._client.interpreter){const n=r(this._client.interpreter);return()=>n.stop()}else return this._client.onStart(n=>{r(n.interpreter)}),()=>{console.log("onAuthStateChanged was added before the interpreter started. Cannot unsubscribe listener.")}}isAuthenticated(){var e;return!!((e=this._client.interpreter)!=null&&e.state.matches({authentication:"signedIn"}))}async isAuthenticatedAsync(){return(await this.waitUntilReady()).state.matches({authentication:"signedIn"})}getAuthenticationStatus(){return this.isReady()?{isAuthenticated:this.isAuthenticated(),isLoading:!1}:{isAuthenticated:!1,isLoading:!0}}getJWTToken(){return this.getAccessToken()}getAccessToken(){var e,r;return(r=(e=this._client.interpreter)==null?void 0:e.state.context.accessToken.value)!=null?r:void 0}getDecodedAccessToken(){const e=this.getAccessToken();return e?Dn(e):null}getHasuraClaims(){var e;return((e=this.getDecodedAccessToken())==null?void 0:e["https://hasura.io/jwt/claims"])||null}getHasuraClaim(e){var r;return((r=this.getHasuraClaims())==null?void 0:r[e.startsWith("x-hasura-")?e:`x-hasura-${e}`])||null}async refreshSession(e){try{const r=await this.waitUntilReady();return new Promise(n=>{const i=e||r.state.context.refreshToken.value;if(!i)return n({session:null,error:$u});const{changed:s}=r.send("TRY_TOKEN",{token:i});if(!s)return n({session:null,error:Vu});r.onTransition(o=>{o.matches({token:{idle:"error"}})?n({session:null,error:Gu}):o.event.type==="TOKEN_CHANGED"&&n({session:ur(o.context),error:null})})})}catch(r){return{session:null,error:r.message}}}getSession(){var e,r;return ur((r=(e=this._client.interpreter)==null?void 0:e.state)==null?void 0:r.context)}getUser(){var e,r,n;return((n=(r=(e=this._client.interpreter)==null?void 0:e.state)==null?void 0:r.context)==null?void 0:n.user)||null}waitUntilReady(){const r=this._client.interpreter;if(!r)throw Error("Auth interpreter not set");return r.state.hasTag("loading")?new Promise((n,i)=>{let s=setTimeout(()=>i(`The state machine is not yet ready after ${15} seconds.`),15e3);r.onTransition(o=>{if(!o.hasTag("loading"))return clearTimeout(s),n(r)})}):Promise.resolve(r)}isReady(){var e,r;return!((r=(e=this._client.interpreter)==null?void 0:e.state)!=null&&r.hasTag("loading"))}get client(){return this._client}}var uc=typeof self=="object"?self.FormData:window.FormData,cc=Object.defineProperty,lc=Object.defineProperties,fc=Object.getOwnPropertyDescriptors,ps=Object.getOwnPropertySymbols,dc=Object.prototype.hasOwnProperty,hc=Object.prototype.propertyIsEnumerable,vs=(t,e,r)=>e in t?cc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,ye=(t,e)=>{for(var r in e||(e={}))dc.call(e,r)&&vs(t,r,e[r]);if(ps)for(var r of ps(e))hc.call(e,r)&&vs(t,r,e[r]);return t},cr=(t,e)=>lc(t,fc(e));class pc{constructor({url:e}){this.url=e,this.httpClient=yt.create({baseURL:this.url})}async upload(e){const{formData:r}=e;try{return{fileMetadata:(await this.httpClient.post("/files",r,{headers:cr(ye(ye({},this.generateUploadHeaders(e)),this.generateAuthHeaders()),{"Content-Type":"multipart/form-data"})})).data,error:null}}catch(n){return{fileMetadata:null,error:n}}}async getPresignedUrl(e){try{const{fileId:r}=e;return{presignedUrl:(await this.httpClient.get(`/files/${r}/presignedurl`,{headers:ye({},this.generateAuthHeaders())})).data,error:null}}catch(r){return{presignedUrl:null,error:r}}}async delete(e){try{const{fileId:r}=e;return await this.httpClient.delete(`/files/${r}`,{headers:ye({},this.generateAuthHeaders())}),{error:null}}catch(r){return{error:r}}}setAccessToken(e){return this.accessToken=e,this}setAdminSecret(e){return this.adminSecret=e,this}generateUploadHeaders(e){const{bucketId:r,name:n,id:i}=e,s={};return r&&(s["x-nhost-bucket-id"]=r),i&&(s["x-nhost-file-id"]=i),n&&(s["x-nhost-file-name"]=n),s}generateAuthHeaders(){return!this.adminSecret&&!this.accessToken?null:this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:{Authorization:`Bearer ${this.accessToken}`}}}class vc{constructor({url:e,adminSecret:r}){this.url=e,this.api=new pc({url:e}),this.setAdminSecret(r)}async upload(e){let r;"file"in e?(r=new uc,r.append("file",e.file)):r=e.formData;const{fileMetadata:n,error:i}=await this.api.upload(cr(ye({},e),{formData:r}));return i?{fileMetadata:null,error:i}:n?{fileMetadata:n,error:null}:{fileMetadata:null,error:new Error("Invalid file returned")}}getUrl(e){return this.getPublicUrl(e)}getPublicUrl(e){const{fileId:r}=e;return`${this.url}/files/${r}`}async getPresignedUrl(e){const{presignedUrl:r,error:n}=await this.api.getPresignedUrl(e);return n?{presignedUrl:null,error:n}:r?{presignedUrl:r,error:null}:{presignedUrl:null,error:new Error("Invalid file id")}}async delete(e){const{error:r}=await this.api.delete(e);return r?{error:r}:{error:null}}setAccessToken(e){return this.api.setAccessToken(e),this}setAdminSecret(e){return this.api.setAdminSecret(e),this}}const ms={progress:null,loaded:0,error:null},ys=()=>Se({preserveActionOrder:!0,schema:{context:{},events:{}},tsTypes:{},context:ye({},ms),initial:"idle",on:{DESTROY:{actions:"sendDestroy",target:"stopped"}},states:{idle:{on:{ADD:{actions:"addFile"},UPLOAD:{cond:"hasFile",target:"uploading"}}},uploading:{entry:"resetProgress",on:{UPLOAD_PROGRESS:{actions:["incrementProgress","sendProgress"]},UPLOAD_DONE:"uploaded",UPLOAD_ERROR:"error",CANCEL:"idle"},invoke:{src:"uploadFile"}},uploaded:{entry:["setFileMetadata","sendDone"]},error:{entry:["setError","sendError"]},stopped:{type:"final"}}},{guards:{hasFile:(t,e)=>!!t.file||!!e.file},actions:{incrementProgress:R({loaded:(t,{loaded:e})=>e,progress:(t,{progress:e})=>e}),setFileMetadata:R({id:(t,{id:e})=>e,bucketId:(t,{bucketId:e})=>e,progress:t=>100}),setError:R({error:(t,{error:e})=>e}),sendProgress:()=>{},sendError:()=>{},sendDestroy:()=>{},sendDone:()=>{},resetProgress:R({progress:t=>null,loaded:t=>0}),addFile:R({file:(t,{file:e})=>e,bucketId:(t,{bucketId:e})=>e,id:(t,{id:e})=>e})},services:{uploadFile:(t,e)=>r=>{const n={"Content-Type":"multipart/form-data"},i=e.id||t.id;i&&(n["x-nhost-file-id"]=i);const s=e.bucketId||t.bucketId;s&&(n["x-nhost-bucket-id"]=s);const o=e.file||t.file;n["x-nhost-file-name"]=e.name||o.name;const a=new FormData;a.append("file",o),e.adminSecret&&(n["x-hasura-admin-secret"]=e.adminSecret),e.accessToken&&(n.Authorization=`Bearer ${e.accessToken}`);let c=0;const l=new AbortController;return yt.post(e.url+"/files",a,{headers:n,signal:l.signal,onUploadProgress:u=>{const p=Math.round(u.loaded*o.size/u.total),f=p-c;c=p,r({type:"UPLOAD_PROGRESS",progress:Math.round(p*100/u.total),loaded:p,additions:f})}}).then(({data:{id:u,bucketId:p}})=>{r({type:"UPLOAD_DONE",id:u,bucketId:p})}).catch(({response:u,message:p})=>{var f,d,v,h,m;r({type:"UPLOAD_ERROR",error:{status:(f=u==null?void 0:u.status)!=null?f:0,message:((v=(d=u==null?void 0:u.data)==null?void 0:d.error)==null?void 0:v.message)||p,error:((m=(h=u==null?void 0:u.data)==null?void 0:h.error)==null?void 0:m.message)||p}})}),()=>{l.abort()}}}}),{pure:ln,sendParent:lr}=Do,mc=()=>Se({id:"files-list",schema:{context:{},events:{}},tsTypes:{},context:{progress:null,files:[],loaded:0,total:0},initial:"idle",on:{UPLOAD:{cond:"hasFileToDownload",actions:"addItem",target:"uploading"},ADD:{actions:"addItem"},REMOVE:{actions:"removeItem"}},states:{idle:{entry:["resetProgress","resetLoaded","resetTotal"],on:{CLEAR:{actions:"clearList",target:"idle"}}},uploading:{entry:["upload","startProgress","resetLoaded","resetTotal"],on:{UPLOAD_PROGRESS:{actions:["incrementProgress"]},UPLOAD_DONE:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],UPLOAD_ERROR:[{cond:"isAllUploaded",target:"uploaded"},{cond:"isAllUploadedOrError",target:"error"}],CANCEL:{actions:"cancel",target:"idle"}}},uploaded:{entry:"setUploaded",on:{CLEAR:{actions:"clearList",target:"idle"}}},error:{on:{CLEAR:{actions:"clearList",target:"idle"}}}}},{guards:{hasFileToDownload:(t,e)=>t.files.some(r=>r.getSnapshot().matches("idle"))||!!e.files,isAllUploaded:t=>t.files.every(e=>{var r;return(r=e.getSnapshot())==null?void 0:r.matches("uploaded")}),isAllUploadedOrError:t=>t.files.every(e=>{const r=e.getSnapshot();return(r==null?void 0:r.matches("error"))||(r==null?void 0:r.matches("uploaded"))})},actions:{incrementProgress:R((t,e)=>{const r=t.loaded+e.additions,n=Math.round(r*100/t.total);return cr(ye({},t),{loaded:r,progress:n})}),setUploaded:R({progress:t=>100,loaded:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetTotal:R({total:({files:t})=>t.map(e=>e.getSnapshot()).filter(e=>!e.matches("uploaded")).reduce((e,r)=>{var n;return e+((n=r.context.file)==null?void 0:n.size)},0)}),resetLoaded:R({loaded:t=>0}),startProgress:R({progress:t=>0}),resetProgress:R({progress:t=>null}),addItem:R((t,{files:e,bucketId:r})=>{const n=e?Array.isArray(e)?e:"length"in e?Array.from(e):[e]:[],i=t.total+n.reduce((o,a)=>o+a.size,0),s=Math.round(t.loaded*100/i);return{files:[...t.files,...n.map(o=>Yo(ys().withConfig({actions:{sendProgress:lr((a,{additions:c})=>({type:"UPLOAD_PROGRESS",additions:c})),sendDone:lr("UPLOAD_DONE"),sendError:lr("UPLOAD_ERROR"),sendDestroy:lr("REMOVE")}}).withContext(cr(ye({},ms),{file:o,bucketId:r})),{sync:!0}))],total:i,loaded:t.loaded,progress:s}}),removeItem:R({files:t=>t.files.filter(e=>{var r,n;const i=(r=e.getSnapshot())==null?void 0:r.matches("stopped");return i&&((n=e.stop)==null||n.call(e)),!i})}),clearList:ln(t=>t.files.map(e=>B({type:"DESTROY"},{to:e.id}))),upload:ln((t,e)=>t.files.map(r=>B(e,{to:r.id}))),cancel:ln(t=>t.files.map(e=>B({type:"CANCEL"},{to:e.id})))}}),yc=async(t,e,r)=>new Promise(n=>{e.send(ye({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret},r)),e.subscribe(i=>{var s;i.matches("error")?n({error:i.context.error,isError:!0,isUploaded:!1}):i.matches("uploaded")&&n({error:null,isError:!1,isUploaded:!0,id:i.context.id,bucketId:i.context.id,name:(s=i.context.file)==null?void 0:s.name})})}),gc=async(t,e,r)=>new Promise(n=>{e.send({type:"UPLOAD",url:t.storage.url,accessToken:t.auth.getAccessToken(),adminSecret:t.adminSecret,bucketId:r==null?void 0:r.bucketId,files:r==null?void 0:r.files}),e.onTransition(i=>{i.matches("error")?n({errors:i.context.files.filter(s=>{var o;return(o=s.getSnapshot())==null?void 0:o.context.error}),isError:!0,files:[]}):i.matches("uploaded")&&n({errors:[],isError:!1,files:i.context.files})})});function Ec(t,e){var r=Boolean(t);if(!r)throw new Error(e!=null?e:"Unexpected invariant triggered.")}var wc=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,fn=wc;function gs(t){var e=t.prototype.toJSON;typeof e=="function"||Ec(0),t.prototype.inspect=e,fn&&(t.prototype[fn]=e)}var Sc=function(){function t(r,n,i){this.start=r.start,this.end=n.end,this.startToken=r,this.endToken=n,this.source=i}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();gs(Sc);var Tc=function(){function t(r,n,i,s,o,a,c){this.kind=r,this.start=n,this.end=i,this.line=s,this.column=o,this.value=c,this.prev=a,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();gs(Tc);function Es(t){return t!=null&&typeof t.kind=="string"}function fr(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?fr=function(r){return typeof r}:fr=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},fr(t)}var bc=10,ws=2;function Oc(t){return dr(t,[])}function dr(t,e){switch(fr(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":Ac(t,e);default:return String(t)}}function Ac(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),n=Pc(t);if(n!==void 0){var i=n.call(t);if(i!==t)return typeof i=="string"?i:dr(i,r)}else if(Array.isArray(t))return _c(t,r);return xc(t,r)}function xc(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>ws)return"["+Rc(t)+"]";var n=r.map(function(i){var s=dr(t[i],e);return i+": "+s});return"{ "+n.join(", ")+" }"}function _c(t,e){if(t.length===0)return"[]";if(e.length>ws)return"[Array]";for(var r=Math.min(bc,t.length),n=t.length-r,i=[],s=0;s<r;++s)i.push(dr(t[s],e));return n===1?i.push("... 1 more item"):n>1&&i.push("... ".concat(n," more items")),"["+i.join(", ")+"]"}function Pc(t){var e=t[String(fn)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function Rc(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function Ic(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=t.indexOf(`
`)===-1,i=t[0]===" "||t[0]==="	",s=t[t.length-1]==='"',o=t[t.length-1]==="\\",a=!n||s||o||r,c="";return a&&!(n&&i)&&(c+=`
`+e),c+=e?t.replace(/\n/g,`
`+e):t,a&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var kc={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Dc=Object.freeze({});function Nc(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kc,n=void 0,i=Array.isArray(t),s=[t],o=-1,a=[],c=void 0,l=void 0,u=void 0,p=[],f=[],d=t;do{o++;var v=o===s.length,h=v&&a.length!==0;if(v){if(l=f.length===0?void 0:p[p.length-1],c=u,u=f.pop(),h){if(i)c=c.slice();else{for(var m={},T=0,E=Object.keys(c);T<E.length;T++){var b=E[T];m[b]=c[b]}c=m}for(var D=0,_=0;_<a.length;_++){var F=a[_][0],x=a[_][1];i&&(F-=D),i&&x===null?(c.splice(F,1),D++):c[F]=x}}o=n.index,s=n.keys,a=n.edits,i=n.inArray,n=n.prev}else{if(l=u?i?o:s[o]:void 0,c=u?u[l]:d,c==null)continue;u&&p.push(l)}var O=void 0;if(!Array.isArray(c)){if(!Es(c))throw new Error("Invalid AST Node: ".concat(Oc(c),"."));var P=Cc(e,c.kind,v);if(P){if(O=P.call(e,c,l,u,p,f),O===Dc)break;if(O===!1){if(!v){p.pop();continue}}else if(O!==void 0&&(a.push([l,O]),!v))if(Es(O))c=O;else{p.pop();continue}}}if(O===void 0&&h&&a.push([l,c]),v)p.pop();else{var j;n={inArray:i,index:o,keys:s,edits:a,prev:n},i=Array.isArray(c),s=i?c:(j=r[c.kind])!==null&&j!==void 0?j:[],o=-1,a=[],u&&f.push(u),u=c}}while(n!==void 0);return a.length!==0&&(d=a[a.length-1][1]),d}function Cc(t,e,r){var n=t[e];if(n){if(!r&&typeof n=="function")return n;var i=r?n.leave:n.enter;if(typeof i=="function")return i}else{var s=r?t.leave:t.enter;if(s){if(typeof s=="function")return s;var o=s[e];if(typeof o=="function")return o}}}function Uc(t){return Nc(t,{leave:Lc})}var jc=80,Lc={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return S(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,n=e.name,i=M("(",S(e.variableDefinitions,", "),")"),s=S(e.directives," "),o=e.selectionSet;return!n&&!s&&!i&&r==="query"?o:S([r,S([n,i]),s,o]," ")},VariableDefinition:function(e){var r=e.variable,n=e.type,i=e.defaultValue,s=e.directives;return r+": "+n+M(" = ",i)+M(" ",S(s," "))},SelectionSet:function(e){var r=e.selections;return ue(r)},Field:function(e){var r=e.alias,n=e.name,i=e.arguments,s=e.directives,o=e.selectionSet,a=M("",r,": ")+n,c=a+M("(",S(i,", "),")");return c.length>jc&&(c=a+M(`(
`,hr(S(i,`
`)),`
)`)),S([c,S(s," "),o]," ")},Argument:function(e){var r=e.name,n=e.value;return r+": "+n},FragmentSpread:function(e){var r=e.name,n=e.directives;return"..."+r+M(" ",S(n," "))},InlineFragment:function(e){var r=e.typeCondition,n=e.directives,i=e.selectionSet;return S(["...",M("on ",r),S(n," "),i]," ")},FragmentDefinition:function(e){var r=e.name,n=e.typeCondition,i=e.variableDefinitions,s=e.directives,o=e.selectionSet;return"fragment ".concat(r).concat(M("(",S(i,", "),")")," ")+"on ".concat(n," ").concat(M("",S(s," ")," "))+o},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var n=e.value,i=e.block;return i?Ic(n,r==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+S(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+S(r,", ")+"}"},ObjectField:function(e){var r=e.name,n=e.value;return r+": "+n},Directive:function(e){var r=e.name,n=e.arguments;return"@"+r+M("(",S(n,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:ae(function(t){var e=t.directives,r=t.operationTypes;return S(["schema",S(e," "),ue(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,n=e.type;return r+": "+n},ScalarTypeDefinition:ae(function(t){var e=t.name,r=t.directives;return S(["scalar",e,S(r," ")]," ")}),ObjectTypeDefinition:ae(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return S(["type",e,M("implements ",S(r," & ")),S(n," "),ue(i)]," ")}),FieldDefinition:ae(function(t){var e=t.name,r=t.arguments,n=t.type,i=t.directives;return e+(Ss(r)?M(`(
`,hr(S(r,`
`)),`
)`):M("(",S(r,", "),")"))+": "+n+M(" ",S(i," "))}),InputValueDefinition:ae(function(t){var e=t.name,r=t.type,n=t.defaultValue,i=t.directives;return S([e+": "+r,M("= ",n),S(i," ")]," ")}),InterfaceTypeDefinition:ae(function(t){var e=t.name,r=t.interfaces,n=t.directives,i=t.fields;return S(["interface",e,M("implements ",S(r," & ")),S(n," "),ue(i)]," ")}),UnionTypeDefinition:ae(function(t){var e=t.name,r=t.directives,n=t.types;return S(["union",e,S(r," "),n&&n.length!==0?"= "+S(n," | "):""]," ")}),EnumTypeDefinition:ae(function(t){var e=t.name,r=t.directives,n=t.values;return S(["enum",e,S(r," "),ue(n)]," ")}),EnumValueDefinition:ae(function(t){var e=t.name,r=t.directives;return S([e,S(r," ")]," ")}),InputObjectTypeDefinition:ae(function(t){var e=t.name,r=t.directives,n=t.fields;return S(["input",e,S(r," "),ue(n)]," ")}),DirectiveDefinition:ae(function(t){var e=t.name,r=t.arguments,n=t.repeatable,i=t.locations;return"directive @"+e+(Ss(r)?M(`(
`,hr(S(r,`
`)),`
)`):M("(",S(r,", "),")"))+(n?" repeatable":"")+" on "+S(i," | ")}),SchemaExtension:function(e){var r=e.directives,n=e.operationTypes;return S(["extend schema",S(r," "),ue(n)]," ")},ScalarTypeExtension:function(e){var r=e.name,n=e.directives;return S(["extend scalar",r,S(n," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,s=e.fields;return S(["extend type",r,M("implements ",S(n," & ")),S(i," "),ue(s)]," ")},InterfaceTypeExtension:function(e){var r=e.name,n=e.interfaces,i=e.directives,s=e.fields;return S(["extend interface",r,M("implements ",S(n," & ")),S(i," "),ue(s)]," ")},UnionTypeExtension:function(e){var r=e.name,n=e.directives,i=e.types;return S(["extend union",r,S(n," "),i&&i.length!==0?"= "+S(i," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,n=e.directives,i=e.values;return S(["extend enum",r,S(n," "),ue(i)]," ")},InputObjectTypeExtension:function(e){var r=e.name,n=e.directives,i=e.fields;return S(["extend input",r,S(n," "),ue(i)]," ")}};function ae(t){return function(e){return S([e.description,t(e)],`
`)}}function S(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(n){return n}).join(r))!==null&&e!==void 0?e:""}function ue(t){return M(`{
`,hr(S(t,`
`)),`
}`)}function M(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function hr(t){return M("  ",t.replace(/\n/g,`
  `))}function Mc(t){return t.indexOf(`
`)!==-1}function Ss(t){return t!=null&&t.some(Mc)}var Fc=Object.defineProperty,$c=Object.defineProperties,Vc=Object.getOwnPropertyDescriptors,pr=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,bs=Object.prototype.propertyIsEnumerable,Os=(t,e,r)=>e in t?Fc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Qe=(t,e)=>{for(var r in e||(e={}))Ts.call(e,r)&&Os(t,r,e[r]);if(pr)for(var r of pr(e))bs.call(e,r)&&Os(t,r,e[r]);return t},As=(t,e)=>$c(t,Vc(e)),Bc=(t,e)=>{var r={};for(var n in t)Ts.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&pr)for(var n of pr(t))e.indexOf(n)<0&&bs.call(t,n)&&(r[n]=t[n]);return r};class Kc{constructor(e){const{url:r,adminSecret:n}=e;this.accessToken=null,this.adminSecret=n,this.instance=yt.create({baseURL:r})}async call(e,r,n){const i=Qe(Qe({},this.generateAccessTokenHeaders()),n==null?void 0:n.headers);let s;try{s=await this.instance.post(e,r,As(Qe({},n),{headers:i}))}catch(o){if(o instanceof Error)return{res:null,error:o}}return s?{res:s,error:null}:{res:null,error:new Error("Unable to make post request to funtion")}}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}class Gc{constructor(e){const{url:r,adminSecret:n}=e;this.url=r,this.accessToken=null,this.adminSecret=n,this.instance=yt.create({baseURL:r})}async request(e,r,n){const i=Qe(Qe({},this.generateAccessTokenHeaders()),n==null?void 0:n.headers);try{const s="",a=(await this.instance.post("",{operationName:s||void 0,query:typeof e=="string"?e:Uc(e),variables:r},As(Qe({},n),{headers:i}))).data,{data:c}=a;return a.errors?{data:null,error:a.errors}:typeof c!="object"||Array.isArray(c)||c===null?{data:null,error:new Error("incorrect response data from GraphQL server")}:{data:c,error:null}}catch(s){return s instanceof Error?{data:null,error:s}:(console.error(s),{data:null,error:new Error("Unable to get do GraphQL request")})}}getUrl(){return this.url}setAccessToken(e){if(!e){this.accessToken=null;return}this.accessToken=e}generateAccessTokenHeaders(){return this.adminSecret?{"x-hasura-admin-secret":this.adminSecret}:this.accessToken?{Authorization:`Bearer ${this.accessToken}`}:{}}}const Hc=/^localhost(:\d+)*$/g;function vr(t,e){const{backendUrl:r,subdomain:n,region:i}=t;if(!r&&!n)throw new Error("Either `backendUrl` or `subdomain` must be set.");if(r)return`${r}/v1/${e}`;if(!n)throw new Error("`subdomain` must be set if `backendUrl` is not set.");const s=n.match(Hc);if(s&&s.length>0){const o=s[0];return o==="localhost"?`http://localhost:1337/v1/${e}`:`http://${o}/v1/${e}`}if(!i)throw new Error('`region` must be set when using a `subdomain` other than "localhost".');return`https://${n}.${e}.${i}.nhost.run/v1`}class zc{constructor(e){var r=e,{refreshIntervalTime:n,clientStorageGetter:i,clientStorageSetter:s,clientStorage:o,clientStorageType:a,autoRefreshToken:c,autoSignIn:l,adminSecret:u,devTools:p,start:f=!0}=r,d=Bc(r,["refreshIntervalTime","clientStorageGetter","clientStorageSetter","clientStorage","clientStorageType","autoRefreshToken","autoSignIn","adminSecret","devTools","start"]),v;this.auth=new ac({url:vr(d,"auth"),refreshIntervalTime:n,clientStorageGetter:i,clientStorageSetter:s,clientStorage:o,clientStorageType:a,autoRefreshToken:c,autoSignIn:l,start:f}),this.storage=new vc({url:vr(d,"storage"),adminSecret:u}),this.functions=new Kc({url:vr(d,"functions"),adminSecret:u}),this.graphql=new Gc({url:vr(d,"graphql"),adminSecret:u}),this.storage.setAccessToken(this.auth.getAccessToken()),this.functions.setAccessToken(this.auth.getAccessToken()),this.graphql.setAccessToken(this.auth.getAccessToken()),(v=this.auth.client)==null||v.onStart(()=>{this.auth.onAuthStateChanged((h,m)=>{h==="SIGNED_OUT"&&(this.storage.setAccessToken(void 0),this.functions.setAccessToken(void 0),this.graphql.setAccessToken(void 0))}),this.auth.onTokenChanged(h=>{this.storage.setAccessToken(h==null?void 0:h.accessToken),this.functions.setAccessToken(h==null?void 0:h.accessToken),this.graphql.setAccessToken(h==null?void 0:h.accessToken)})}),this._adminSecret=u,this.devTools=p}get adminSecret(){return this._adminSecret}set adminSecret(e){this._adminSecret=e,this.storage.setAdminSecret(e)}}class qc extends zc{constructor(e){super(to(Rn({},e),{start:!1}))}}function ce(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Xe(t){return!!t&&!!t[X]}function Ce(t){return!!t&&(function(e){if(!e||typeof e!="object")return!1;var r=Object.getPrototypeOf(e);if(r===null)return!0;var n=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===tl}(t)||Array.isArray(t)||!!t[Us]||!!t.constructor[Us]||hn(t)||pn(t))}function wt(t,e,r){r===void 0&&(r=!1),Ze(t)===0?(r?Object.keys:xn)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,i){return e(i,n,t)})}function Ze(t){var e=t[X];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:hn(t)?2:pn(t)?3:0}function dn(t,e){return Ze(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Wc(t,e){return Ze(t)===2?t.get(e):t[e]}function xs(t,e,r){var n=Ze(t);n===2?t.set(e,r):n===3?(t.delete(e),t.add(r)):t[e]=r}function Jc(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function hn(t){return Zc&&t instanceof Map}function pn(t){return el&&t instanceof Set}function Ue(t){return t.o||t.t}function vn(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=rl(t);delete e[X];for(var r=xn(e),n=0;n<r.length;n++){var i=r[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:t[i]})}return Object.create(Object.getPrototypeOf(t),e)}function mn(t,e){return e===void 0&&(e=!1),yn(t)||Xe(t)||!Ce(t)||(Ze(t)>1&&(t.set=t.add=t.clear=t.delete=Yc),Object.freeze(t),e&&wt(t,function(r,n){return mn(n,!0)},!0)),t}function Yc(){ce(2)}function yn(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function he(t){var e=nl[t];return e||ce(18,t),e}function _s(){return St}function gn(t,e){e&&(he("Patches"),t.u=[],t.s=[],t.v=e)}function mr(t){En(t),t.p.forEach(Qc),t.p=null}function En(t){t===St&&(St=t.l)}function Ps(t){return St={p:[],l:St,h:t,m:!0,_:0}}function Qc(t){var e=t[X];e.i===0||e.i===1?e.j():e.O=!0}function wn(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.g||he("ES5").S(e,t,n),n?(r[X].P&&(mr(e),ce(4)),Ce(t)&&(t=yr(e,t),e.l||gr(e,t)),e.u&&he("Patches").M(r[X].t,t,e.u,e.s)):t=yr(e,r,[]),mr(e),e.u&&e.v(e.u,e.s),t!==Cs?t:void 0}function yr(t,e,r){if(yn(e))return e;var n=e[X];if(!n)return wt(e,function(s,o){return Rs(t,n,e,s,o,r)},!0),e;if(n.A!==t)return e;if(!n.P)return gr(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=vn(n.k):n.o;wt(n.i===3?new Set(i):i,function(s,o){return Rs(t,n,i,s,o,r)}),gr(t,i,!1),r&&t.u&&he("Patches").R(n,r,t.u,t.s)}return n.o}function Rs(t,e,r,n,i,s){if(Xe(i)){var o=yr(t,i,s&&e&&e.i!==3&&!dn(e.D,n)?s.concat(n):void 0);if(xs(r,n,o),!Xe(o))return;t.m=!1}if(Ce(i)&&!yn(i)){if(!t.h.F&&t._<1)return;yr(t,i),e&&e.A.l||gr(t,i)}}function gr(t,e,r){r===void 0&&(r=!1),t.h.F&&t.m&&mn(e,r)}function Sn(t,e){var r=t[X];return(r?Ue(r):t)[e]}function Is(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Tn(t){t.P||(t.P=!0,t.l&&Tn(t.l))}function bn(t){t.o||(t.o=vn(t.t))}function On(t,e,r){var n=hn(e)?he("MapSet").N(e,r):pn(e)?he("MapSet").T(e,r):t.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:_s(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},c=a,l=_n;o&&(c=[a],l=Tt);var u=Proxy.revocable(c,l),p=u.revoke,f=u.proxy;return a.k=f,a.j=p,f}(e,r):he("ES5").J(e,r);return(r?r.A:_s()).p.push(n),n}function Xc(t){return Xe(t)||ce(22,t),function e(r){if(!Ce(r))return r;var n,i=r[X],s=Ze(r);if(i){if(!i.P&&(i.i<4||!he("ES5").K(i)))return i.t;i.I=!0,n=ks(r,s),i.I=!1}else n=ks(r,s);return wt(n,function(o,a){i&&Wc(i.t,o)===a||xs(n,o,e(a))}),s===3?new Set(n):n}(t)}function ks(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return vn(t)}var Ds,St,An=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",Zc=typeof Map!="undefined",el=typeof Set!="undefined",Ns=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Cs=An?Symbol.for("immer-nothing"):((Ds={})["immer-nothing"]=!0,Ds),Us=An?Symbol.for("immer-draftable"):"__$immer_draftable",X=An?Symbol.for("immer-state"):"__$immer_state",tl=""+Object.prototype.constructor,xn=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,rl=Object.getOwnPropertyDescriptors||function(t){var e={};return xn(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},nl={},_n={get:function(t,e){if(e===X)return t;var r=Ue(t);if(!dn(r,e))return function(i,s,o){var a,c=Is(s,o);return c?"value"in c?c.value:(a=c.get)===null||a===void 0?void 0:a.call(i.k):void 0}(t,r,e);var n=r[e];return t.I||!Ce(n)?n:n===Sn(t.t,e)?(bn(t),t.o[e]=On(t.A.h,n,t)):n},has:function(t,e){return e in Ue(t)},ownKeys:function(t){return Reflect.ownKeys(Ue(t))},set:function(t,e,r){var n=Is(Ue(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var i=Sn(Ue(t),e),s=i==null?void 0:i[X];if(s&&s.t===r)return t.o[e]=r,t.D[e]=!1,!0;if(Jc(r,i)&&(r!==void 0||dn(t.t,e)))return!0;bn(t),Tn(t)}return t.o[e]===r&&typeof r!="number"&&(r!==void 0||e in t.o)||(t.o[e]=r,t.D[e]=!0,!0)},deleteProperty:function(t,e){return Sn(t.t,e)!==void 0||e in t.t?(t.D[e]=!1,bn(t),Tn(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Ue(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){ce(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){ce(12)}},Tt={};wt(_n,function(t,e){Tt[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Tt.deleteProperty=function(t,e){return Tt.set.call(this,t,e,void 0)},Tt.set=function(t,e,r){return _n.set.call(this,t[0],e,r,t[0])};var il=function(){function t(r){var n=this;this.g=Ns,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var c=n;return function(h){var m=this;h===void 0&&(h=a);for(var T=arguments.length,E=Array(T>1?T-1:0),b=1;b<T;b++)E[b-1]=arguments[b];return c.produce(h,function(D){var _;return(_=s).call.apply(_,[m,D].concat(E))})}}var l;if(typeof s!="function"&&ce(6),o!==void 0&&typeof o!="function"&&ce(7),Ce(i)){var u=Ps(n),p=On(n,i,void 0),f=!0;try{l=s(p),f=!1}finally{f?mr(u):En(u)}return typeof Promise!="undefined"&&l instanceof Promise?l.then(function(h){return gn(u,o),wn(h,u)},function(h){throw mr(u),h}):(gn(u,o),wn(l,u))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Cs&&(l=void 0),n.F&&mn(l,!0),o){var d=[],v=[];he("Patches").M(i,l,d,v),o(d,v)}return l}ce(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var u=arguments.length,p=Array(u>1?u-1:0),f=1;f<u;f++)p[f-1]=arguments[f];return n.produceWithPatches(l,function(d){return i.apply(void 0,[d].concat(p))})};var o,a,c=n.produce(i,s,function(l,u){o=l,a=u});return typeof Promise!="undefined"&&c instanceof Promise?c.then(function(l){return[l,o,a]}):[c,o,a]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){Ce(r)||ce(8),Xe(r)&&(r=Xc(r));var n=Ps(this),i=On(this,r,void 0);return i[X].C=!0,En(n),i},e.finishDraft=function(r,n){var i=r&&r[X],s=i.A;return gn(s,n),wn(void 0,s)},e.setAutoFreeze=function(r){this.F=r},e.setUseProxies=function(r){r&&!Ns&&ce(20),this.g=r},e.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){r=s.value;break}}i>-1&&(n=n.slice(i+1));var o=he("Patches").$;return Xe(r)?o(r,n):this.produce(r,function(a){return o(a,n)})},t}(),Z=new il,sl=Z.produce;Z.produceWithPatches.bind(Z),Z.setAutoFreeze.bind(Z),Z.setUseProxies.bind(Z),Z.applyPatches.bind(Z),Z.createDraft.bind(Z),Z.finishDraft.bind(Z);var ol=sl,js={exports:{}},Ls={},Ms={exports:{}},Fs={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var et=In.default;function al(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ul=typeof Object.is=="function"?Object.is:al,cl=et.useState,ll=et.useEffect,fl=et.useLayoutEffect,dl=et.useDebugValue;function hl(t,e){var r=e(),n=cl({inst:{value:r,getSnapshot:e}}),i=n[0].inst,s=n[1];return fl(function(){i.value=r,i.getSnapshot=e,Pn(i)&&s({inst:i})},[t,r,e]),ll(function(){return Pn(i)&&s({inst:i}),t(function(){Pn(i)&&s({inst:i})})},[t]),dl(r),r}function Pn(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!ul(t,r)}catch{return!0}}function pl(t,e){return e()}var vl=typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"?pl:hl;Fs.useSyncExternalStore=et.useSyncExternalStore!==void 0?et.useSyncExternalStore:vl,Ms.exports=Fs;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Er=In.default,ml=Ms.exports;function yl(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gl=typeof Object.is=="function"?Object.is:yl,El=ml.useSyncExternalStore,wl=Er.useRef,Sl=Er.useEffect,Tl=Er.useMemo,bl=Er.useDebugValue;Ls.useSyncExternalStoreWithSelector=function(t,e,r,n,i){var s=wl(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Tl(function(){function c(d){if(!l){if(l=!0,u=d,d=n(d),i!==void 0&&o.hasValue){var v=o.value;if(i(v,d))return p=v}return p=d}if(v=p,gl(u,d))return v;var h=n(d);return i!==void 0&&i(v,h)?v:(u=d,p=h)}var l=!1,u,p,f=r===void 0?null:r;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,r,n,i]);var a=El(t,s[0],s[1]);return Sl(function(){o.hasValue=!0,o.value=a},[a]),bl(a),a},js.exports=Ls;var Ol=A.useLayoutEffect;function $s(t){var e=io.useRef();return e.current||(e.current={v:t()}),e.current.v}var wr=globalThis&&globalThis.__assign||function(){return wr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},wr.apply(this,arguments)},Al=globalThis&&globalThis.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r},xl=globalThis&&globalThis.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s};function _l(t,e){var r=$s(function(){return typeof t=="function"?t():t}),n=e.context,i=e.guards,s=e.actions,o=e.activities,a=e.services,c=e.delays;e.state;var l=Al(e,["context","guards","actions","activities","services","delays","state"]),u=$s(function(){var p={context:n,guards:i,actions:s,activities:o,services:a,delays:c},f=r.withConfig(p,function(){return wr(wr({},r.context),n)});return Re(f,l)});return Ol(function(){Object.assign(u.machine.options.actions,s),Object.assign(u.machine.options.guards,i),Object.assign(u.machine.options.activities,o),Object.assign(u.machine.options.services,a),Object.assign(u.machine.options.delays,c)},[s,i,o,a,c]),u}function Ae(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=xl(e,2),i=n[0],s=i===void 0?{}:i,o=n[1],a=_l(t,s);return A.useEffect(function(){if(!!o){var c=a.subscribe(Ct(o));return function(){c.unsubscribe()}}},[o]),A.useEffect(function(){var c=s.state;return a.start(c?fe.create(c):void 0),function(){a.stop(),a.status=J.NotStarted}},[]),a}function Pl(t){return"state"in t}globalThis&&globalThis.__read,globalThis&&globalThis.__values;function Rl(t){return t.status!==0?t.state:t.machine.initialState}function Il(t){return"state"in t&&"machine"in t}var kl=function(t,e){return t===e},Dl=function(t){return Il(t)?Rl(t):Pl(t)?t.state:void 0};function y(t,e,r,n){r===void 0&&(r=kl),n===void 0&&(n=Dl);var i=A.useCallback(function(a){var c=t.subscribe(a).unsubscribe;return c},[t]),s=A.useCallback(function(){return n(t)},[t,n]),o=js.exports.useSyncExternalStoreWithSelector(i,s,s,e,r);return o}const tt=A.createContext({}),Nl=n=>{var i=n,{nhost:t,initial:e}=i,r=ro(i,["nhost","initial"]);const s=t.auth.client.machine,o=Ae(s,{devTools:t.devTools,context:ol(s.context,c=>{var l,u;e&&(c.user=e.user,c.refreshToken.value=(l=e.refreshToken)!=null?l:null,c.accessToken.value=(u=e.accessToken)!=null?u:null,c.accessToken.expiresAt=new Date(Date.now()+e.accessTokenExpiresIn*1e3))})}).start(),a=A.useRef(!0);return A.useEffect(()=>{a.current?a.current=!1:e&&o.send("SESSION_UPDATE",{data:{session:e}})},[e,o]),t.auth.client.interpreter=o,q.jsx(tt.Provider,{value:t,children:r.children})},V=()=>{var r;const e=(r=A.useContext(tt).auth)==null?void 0:r.client.interpreter;if(!e)throw Error("No interpreter");return e},Vs=()=>{const t=V();return y(t,e=>e.context.accessToken.value)},ge=()=>A.useContext(tt),Cl=()=>{const t=ge(),[e,r]=A.useState(null),n=!e,i=!!e,[s,o]=A.useState(!1);return{add:async c=>{o(!0);const l=await ts(t.auth.client,c),{error:u}=l;return u&&r(u),o(!1),l},isLoading:s,isSuccess:n,isError:i,error:e}},Ul=()=>{const t=V(),[e,r]=A.useState(!!t.status&&t.state.matches({authentication:"signedIn"}));return A.useEffect(()=>t.subscribe(i=>{const s=i.matches({authentication:"signedIn"});r(s)}).unsubscribe,[t]),e},Bs=()=>{const t=V();return y(t,e=>({isAuthenticated:e.matches({authentication:"signedIn"}),isLoading:e.hasTag("loading"),error:e.context.errors.authentication||null,isError:e.matches({authentication:{signedOut:"failed"}})}),(e,r)=>e.isAuthenticated===r.isAuthenticated&&e.isLoading===r.isLoading)},jl=()=>{const t=V();return y(t,e=>e.hasTag("loading"))};function Ll(t,e){const r=A.useMemo(()=>typeof t=="string"?t:void 0,[t]),n=A.useMemo(()=>typeof t!="string"?t:e,[t,e]),i=ge(),s=A.useMemo(()=>Qi(i.auth.client),[i]),o=Ae(s),a=y(o,f=>f.matches("requesting")),c=y(o,f=>f.context.error),l=y(o,f=>f.matches("idle.error")),u=y(o,f=>f.matches("idle.success"));return{changeEmail:A.useCallback(async(f,d=n)=>rs(o,typeof f=="string"?f:r,d),[o,r,n]),isLoading:a,needsEmailVerification:u,isError:l,error:c}}const Ml=t=>{const e=ge(),r=A.useMemo(()=>Xi(e.auth.client),[e]),n=Ae(r),i=y(n,l=>l.matches({idle:"error"})),s=y(n,l=>l.matches({idle:"success"})),o=y(n,l=>l.context.error),a=y(n,l=>l.matches("requesting"));return{changePassword:l=>ns(n,typeof l=="string"?l:t),isLoading:a,isSuccess:s,isError:i,error:o}},Fl=()=>{const t=ge(),e=A.useMemo(()=>Yu(t.auth.client),[t]),r=Ae(e),n=y(r,f=>f.matches({idle:"error"})||f.matches({generated:{idle:"error"}})),i=y(r,f=>f.matches("generating")),s=y(r,f=>f.matches("generated")),o=y(r,f=>f.matches({generated:"activating"})),a=y(r,f=>f.matches({generated:"activated"})),c=y(r,f=>f.context.error),l=y(r,f=>f.context.imageUrl||"");return{generateQrCode:()=>Zu(r),isGenerating:i,qrCodeDataUrl:l,isGenerated:s,activateMfa:f=>ec(r,f),isActivating:o,isActivated:a,isError:n,error:c}},Ks=()=>{const t=Vs();return t?Dn(t):null},Gs=t=>{const e=ge(),r=v=>{t.send({type:"ADD",file:v.file,bucketId:v.bucketId||f})},n=v=>yc(e,t,{file:v.file,bucketId:v.bucketId||f,id:p,name:d}),i=()=>{t.send("CANCEL")},s=()=>{t.send("DESTROY")},o=y(t,v=>v.matches("uploading")),a=y(t,v=>v.matches("uploaded")),c=y(t,v=>v.matches("error")),l=y(t,v=>v.context.error||null),u=y(t,v=>v.context.progress),p=y(t,v=>v.context.id),f=y(t,v=>v.context.bucketId),d=y(t,v=>{var h;return(h=v.context.file)==null?void 0:h.name});return{add:r,upload:n,cancel:i,destroy:s,isUploaded:a,isUploading:o,isError:c,error:l,progress:u,id:p,bucketId:f,name:d}},$l=()=>{const t=Ae(ys);return Gs(t)},Hs=()=>{const t=Ks();return(t==null?void 0:t["https://hasura.io/jwt/claims"])||null},Vl=t=>{const e=Hs();return(e==null?void 0:e[t.startsWith("x-hasura-")?t:`x-hasura-${t}`])||null},Bl=()=>{const t=ge(),[e,r]=A.useState([]),n=Ae(mc,{},d=>{d.event.type==="UPLOAD_ERROR"?r(d.context.files.filter(v=>{var h;return(h=v.getSnapshot())==null?void 0:h.context.error})):(d.matches("uploaded")||d.event.type==="CLEAR")&&e.length>0&&r([])}),i=d=>{n.send(Rn({type:"ADD"},d))},s=d=>gc(t,n,d),o=()=>{n.send("CANCEL")},a=()=>{n.send("CLEAR")},c=y(n,d=>d.matches("uploading")),l=y(n,d=>d.matches("uploaded")),u=y(n,d=>d.matches("error")),p=y(n,d=>d.context.progress),f=y(n,d=>d.context.files);return{upload:s,add:i,clear:a,cancel:o,progress:p,isUploaded:l,isUploading:c,files:f,isError:u,errors:e}},zs=()=>{const t=V();return y(t,e=>e.context.user,(e,r)=>(e&&JSON.stringify(e))===(r&&JSON.stringify(r)))},Kl=()=>{const{isLoading:t,isAuthenticated:e}=Bs(),r=zs();return A.useMemo(()=>({isLoading:t,isAuthenticated:e,user:r}),[t,e,r])},Gl=()=>A.useContext(tt).auth.client.backendUrl.replace("/v1/auth",""),Hl=t=>{const[e,r]=A.useState(!0);A.useEffect(()=>{r(!1)},[]);const n=A.useContext(tt);return new Proxy({},{get(i,s){return rn(`${n.auth.client.backendUrl}/signin/provider/${s}`,oe(e?void 0:n.auth.client.clientUrl,t))}})},zl=(t,e)=>{const r=typeof t=="string"?t:void 0,n=typeof t!="string"?t:e,i=ge(),s=A.useMemo(()=>Zi(i.auth.client),[i]),o=Ae(s),a=y(o,f=>f.matches("requesting")),c=y(o,f=>f.context.error),l=y(o,f=>f.matches("idle.error")),u=y(o,f=>f.matches("idle.success"));return{resetPassword:(f,d=n)=>is(o,typeof f=="string"?f:r,d),isLoading:a,isSent:u,isError:l,error:c}},ql=(t,e)=>{const r=typeof t=="string"?t:void 0,n=typeof t!="string"?t:e,i=ge(),s=A.useMemo(()=>es(i.auth.client),[i]),o=Ae(s),a=y(o,f=>f.matches({idle:"error"})),c=y(o,f=>f.matches({idle:"success"})),l=y(o,f=>f.context.error),u=y(o,f=>f.matches("requesting"));return{sendEmail:(f,d=n)=>ss(o,typeof f=="string"?f:r,d),isLoading:u,isSent:c,isError:a,error:l}},Wl=()=>{const t=V(),e=()=>os(t),r=y(t,c=>c.context.errors.authentication||null,(c,l)=>(c==null?void 0:c.error)===(l==null?void 0:l.error)),n=y(t,c=>c.matches({authentication:{authenticating:"anonymous"}})),i=y(t,c=>c.matches({authentication:"signedIn"})),s=y(t,c=>c.matches({authentication:{signedOut:"failed"}})),o=y(t,c=>c.context.user,(c,l)=>(c==null?void 0:c.id)===(l==null?void 0:l.id));return{accessToken:y(t,c=>c.context.accessToken.value),error:r,isError:s,isLoading:n,isSuccess:i,signInAnonymous:e,user:o}},Jl=(t,e,r)=>{const n=V(),i=(h,m)=>as(n,typeof h=="string"?h:t,typeof m=="string"?m:e),s=h=>cs(n,typeof h=="string"?h:r),o=y(n,h=>h.context.user,(h,m)=>(h==null?void 0:h.id)===(m==null?void 0:m.id)),a=y(n,h=>h.context.accessToken.value),c=y(n,h=>h.context.errors.authentication||null,(h,m)=>(h==null?void 0:h.error)===(m==null?void 0:m.error)),l=y(n,h=>h.matches({authentication:"signedIn"})),u=y(n,h=>h.matches({authentication:{authenticating:"password"}}),(h,m)=>h===m),p=y(n,h=>h.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(h,m)=>h===m),f=y(n,h=>h.matches({authentication:{signedOut:"needsMfa"}}),(h,m)=>h===m),d=y(n,h=>h.matches({authentication:{signedOut:"failed"}}),(h,m)=>h===m),v=y(n,h=>h.context.mfa);return{accessToken:a,error:c,isError:d,isLoading:u,isSuccess:l,needsEmailVerification:p,needsMfaOtp:f,mfa:v,sendMfaOtp:s,signInEmailPassword:i,user:o}};function Yl(t,e){const r=typeof t=="string"?t:void 0,n=typeof t=="string"?e:t,i=V(),s=(u,p=n)=>on(i,typeof u=="string"?u:r,p),o=y(i,u=>u.context.errors.registration||null,(u,p)=>(u==null?void 0:u.error)===(p==null?void 0:p.error)),a=y(i,u=>u.matches("registration.passwordlessEmail")),c=y(i,u=>u.matches("registration.incomplete.needsEmailVerification")),l=y(i,u=>u.matches("registration.incomplete.failed"));return{signInEmailPasswordless:s,isLoading:a,isSuccess:c,isError:l,error:o}}const Ql=()=>{const t=V(),e=l=>us(t,l),r=y(t,l=>l.context.user,(l,u)=>(l==null?void 0:l.id)===(u==null?void 0:u.id)),n=y(t,l=>l.context.accessToken.value),i=y(t,l=>l.context.errors.authentication||null,(l,u)=>(l==null?void 0:l.error)===(u==null?void 0:u.error)),s=y(t,l=>l.matches({authentication:"signedIn"})),o=y(t,l=>l.matches({authentication:{authenticating:"securityKeyEmail"}}),(l,u)=>l===u),a=y(t,l=>l.matches({authentication:{signedOut:"noErrors"},registration:{incomplete:"needsEmailVerification"}}),(l,u)=>l===u),c=y(t,l=>l.matches({authentication:{signedOut:"failed"}}),(l,u)=>l===u);return{accessToken:n,error:i,isError:c,isLoading:o,isSuccess:s,needsEmailVerification:a,signInEmailSecurityKey:e,user:r}};function Xl(t){const e=V(),[r,n]=A.useState(""),i=(p,f=t)=>(n(p),an(e,p,f)),s=async(...p)=>{if(p.length===2){const[d,v]=p;return un(e,d,v)}const[f]=p;return un(e,r,f)},o=y(e,p=>p.context.errors.registration||null,(p,f)=>(p==null?void 0:p.error)===(f==null?void 0:f.error)),a=y(e,p=>p.matches("registration.passwordlessSms")||p.matches("registration.passwordlessSmsOtp")),c=y(e,p=>p.matches("authentication.signedIn")),l=y(e,p=>p.matches("registration.incomplete.needsOtp")),u=y(e,p=>p.matches("registration.incomplete.failed"));return{signInSmsPasswordless:i,sendOtp:s,isLoading:a,isSuccess:c,needsOtp:l,isError:u,error:o}}const Zl=(t=!1)=>{const e=V(),r=s=>ls(e,typeof s=="boolean"?s:t),n=y(e,s=>s.matches({authentication:{signedOut:"success"}}),(s,o)=>s===o),i=y(e,s=>s.context.errors.signout||null,(s,o)=>(s==null?void 0:s.error)===(o==null?void 0:o.error));return{signOut:r,isSuccess:n,error:i}},ef=(t,e,r)=>{const n=typeof t=="string"?t:void 0,i=typeof e=="string"?e:void 0,s=r||(typeof t!="string"?t:void 0),o=V(),a=y(o,h=>!!h.context.errors.registration),c=y(o,h=>h.context.errors.registration||null,(h,m)=>(h==null?void 0:h.error)===(m==null?void 0:m.error)),l=y(o,h=>h.matches("registration.emailPassword")),u=y(o,h=>h.matches("registration.incomplete.needsEmailVerification")),p=y(o,h=>h.matches({authentication:"signedIn",registration:"complete"})),f=(h,m=i,T=s)=>cn(o,typeof h=="string"?h:n,m,T),d=y(o,h=>h.context.user,(h,m)=>(h==null?void 0:h.id)===(m==null?void 0:m.id));return{accessToken:y(o,h=>h.context.accessToken.value),error:c,isError:a,isLoading:l,isSuccess:p,needsEmailVerification:u,signUpEmailPassword:f,user:d}},tf=t=>{const e=V(),r=y(e,u=>!!u.context.errors.registration),n=y(e,u=>u.context.errors.registration||null,(u,p)=>(u==null?void 0:u.error)===(p==null?void 0:p.error)),i=y(e,u=>u.matches("registration.securityKey")),s=y(e,u=>u.matches("registration.incomplete.needsEmailVerification")),o=y(e,u=>u.matches({authentication:"signedIn",registration:"complete"})),a=(u,p=t)=>fs(e,u,p),c=y(e,u=>u.context.user,(u,p)=>(u==null?void 0:u.id)===(p==null?void 0:p.id));return{accessToken:y(e,u=>u.context.accessToken.value),error:n,isError:r,isLoading:i,isSuccess:o,needsEmailVerification:s,signUpEmailSecurityKey:a,user:c}},qs=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.avatarUrl},(e,r)=>e===r)},rf=qs,Ws=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.defaultRole},(e,r)=>e===r)},nf=Ws,Js=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.displayName},(e,r)=>e===r)},sf=Js,Ys=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.email},(e,r)=>e===r)},of=Ys,af=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.id},(e,r)=>e===r)},Qs=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.isAnonymous},(e,r)=>e===r)},uf=Qs,cf=()=>{const t=V();return y(t,e=>{var r;return(r=e.context.user)==null?void 0:r.locale},(e,r)=>e===r)},lf=()=>{const t=V();return y(t,e=>{var r;return((r=e.context.user)==null?void 0:r.roles)||[]},(e,r)=>e.every(n=>r.includes(n)&&r.every(i=>e.includes(i))))};w.NhostClient=qc,w.NhostReactContext=tt,w.NhostReactProvider=Nl,w.useAccessToken=Vs,w.useAddSecurityKey=Cl,w.useAuthInterpreter=V,w.useAuthLoading=jl,w.useAuthenticated=Ul,w.useAuthenticationStatus=Bs,w.useAvatarUrl=rf,w.useChangeEmail=Ll,w.useChangePassword=Ml,w.useConfigMfa=Fl,w.useDecodedAccessToken=Ks,w.useDefaultRole=nf,w.useDisplayName=sf,w.useEmail=of,w.useFileUpload=$l,w.useFileUploadItem=Gs,w.useHasuraClaim=Vl,w.useHasuraClaims=Hs,w.useIsAnonymous=uf,w.useMultipleFilesUpload=Bl,w.useNhostAuth=Kl,w.useNhostBackendUrl=Gl,w.useNhostClient=ge,w.useProviderLink=Hl,w.useResetPassword=zl,w.useSendVerificationEmail=ql,w.useSignInAnonymous=Wl,w.useSignInEmailPassword=Jl,w.useSignInEmailPasswordless=Yl,w.useSignInEmailSecurityKey=Ql,w.useSignInSmsPasswordless=Xl,w.useSignOut=Zl,w.useSignUpEmailPassword=ef,w.useSignUpEmailSecurityKeyEmail=tf,w.useUserAvatarUrl=qs,w.useUserData=zs,w.useUserDefaultRole=Ws,w.useUserDisplayName=Js,w.useUserEmail=Ys,w.useUserId=af,w.useUserIsAnonymous=Qs,w.useUserLocale=cf,w.useUserRoles=lf,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=react.umd.js.map
