{"ast":null,"code":"import _slicedToArray from\"/Users/nelu/Desktop/Stuff/Projects/cgp-identify-platform/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{CircularProgressbar,buildStyles}from'react-circular-progressbar';import'react-circular-progressbar/dist/styles.css';import Button from'../elements/Button';import Card from'../elements/Card';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var red='#f54e4e';var green='#4aec8c';var Time=function Time(_ref){var workMin=_ref.workMin,breakMin=_ref.breakMin,setBreakMin=_ref.setBreakMin,setWorkMin=_ref.setWorkMin;var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isPaused=_useState2[0],setIsPaused=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),secondsLeft=_useState4[0],setSecondsLeft=_useState4[1];var _useState5=useState(\"work\"),_useState6=_slicedToArray(_useState5,2),mode=_useState6[0],setMode=_useState6[1];var secondsLeftRef=useRef(secondsLeft);var isPausedRef=useRef(isPaused);var modeRef=useRef(mode);function tick(){secondsLeftRef.current--;setSecondsLeft(secondsLeftRef.current);}var initTimer=function initTimer(){setSecondsLeft(workMin*60);};var switchMode=function switchMode(){var nextMode=modeRef.current==='work'?'break':'work';var nextSeconds=(nextMode==='work'?workMin:breakMin)*60;setMode(nextMode);modeRef.current=nextMode;setSecondsLeft(nextSeconds);secondsLeftRef.current=nextSeconds;};useEffect(function(){initTimer();var interval=setInterval(function(){if(isPausedRef.current){return;}if(secondsLeftRef.current===0){return switchMode();}tick();console.log(tick());console.log(secondsLeftRef.current);},1000);return function(){return clearInterval(interval);};},[workMin,breakMin,setBreakMin,setWorkMin]);var totalSeconds=mode==='work'?workMin*60:breakMin*60;var percentage=Math.round(secondsLeft/totalSeconds)*100;var minutes=Math.floor(secondsLeft/60);var seconds=secondsLeft%60;if(seconds<10){seconds='0'+seconds;}console.log(minutes,seconds);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CircularProgressbar,{value:percentage// text={`${66}%`} \n,text:minutes+\":\"+seconds,styles:buildStyles({rotation:0.5,strokeLinecap:'butt',pathTransitionDuration:0.5,pathColor:red,textColor:'#f88',trailColor:'#d6d6d6',backgroundColor:'#3e98c7'})})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center mt-6 space-x-4\",children:isPaused?/*#__PURE__*/_jsx(Button,{className:\"py-1 px-6\",children:\"Play\"}):/*#__PURE__*/_jsx(Button,{className:\"py-1 px-6\",children:\"Pause\"})})]})});};export default Time;","map":{"version":3,"names":["React","useState","useEffect","useRef","CircularProgressbar","buildStyles","Button","Card","red","green","Time","workMin","breakMin","setBreakMin","setWorkMin","isPaused","setIsPaused","secondsLeft","setSecondsLeft","mode","setMode","secondsLeftRef","isPausedRef","modeRef","tick","current","initTimer","switchMode","nextMode","nextSeconds","interval","setInterval","console","log","clearInterval","totalSeconds","percentage","Math","round","minutes","floor","seconds","rotation","strokeLinecap","pathTransitionDuration","pathColor","textColor","trailColor","backgroundColor"],"sources":["/Users/nelu/Desktop/Stuff/Projects/cgp-identify-platform/frontend/src/components/widgets/Time.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CircularProgressbar, buildStyles  } from 'react-circular-progressbar';\nimport 'react-circular-progressbar/dist/styles.css';\nimport Button from '../elements/Button';\nimport Card from '../elements/Card';\n\nconst red = '#f54e4e';\nconst green = '#4aec8c';\n\nconst Time = ({ workMin, breakMin, setBreakMin, setWorkMin}) => {\n    \n    const [isPaused, setIsPaused] = useState(true);\n    const [secondsLeft, setSecondsLeft] = useState(0);\n    const [mode, setMode] = useState(\"work\");\n    const secondsLeftRef = useRef(secondsLeft);\n    const isPausedRef = useRef(isPaused);\n    const modeRef = useRef(mode);\n\n    \n    function tick(){\n        secondsLeftRef.current--;\n        setSecondsLeft(secondsLeftRef.current);\n    }\n\n    const initTimer = () => {\n        setSecondsLeft(workMin*60);\n    }\n\n    const switchMode = () => {\n        const nextMode = modeRef.current === 'work'? 'break': 'work';\n        const nextSeconds = (nextMode ==='work' ? workMin : breakMin)*60;\n        setMode(nextMode);\n        modeRef.current = nextMode;\n        setSecondsLeft(nextSeconds);\n        secondsLeftRef.current = nextSeconds;\n    }\n\n    useEffect(() => {\n        initTimer();\n\n        const interval = setInterval(()=>{\n            if(isPausedRef.current) {\n                return;\n            }\n\n            if(secondsLeftRef.current === 0){\n               return switchMode();\n            }\n\n            tick();\n            console.log(tick())\n            console.log(secondsLeftRef.current)\n        }, 1000);\n\n        return () => clearInterval(interval);\n    }, [workMin, breakMin, setBreakMin, setWorkMin])\n\n    const totalSeconds = mode === 'work'? workMin*60 : breakMin*60\n    const percentage = Math.round(secondsLeft/totalSeconds)*100;\n\n    const minutes = Math.floor(secondsLeft/60);\n    let seconds = secondsLeft%60;\n    if(seconds<10) {\n        seconds= '0' + seconds;\n    }\n\n    console.log(minutes,seconds)\n\n\n    return (\n        <>\n            <Card>\n                <div>\n                    <CircularProgressbar \n                        value={percentage} \n                        // text={`${66}%`} \n                        text={minutes+\":\"+seconds}\n                        styles={buildStyles({\n                        \n                        rotation: 0.5,                        \n                        strokeLinecap: 'butt',                                            \n                        pathTransitionDuration: 0.5,                    \n                        pathColor: red,\n                        textColor: '#f88',\n                        trailColor: '#d6d6d6',\n                        backgroundColor: '#3e98c7',\n                        })}  \n                    />\n                </div>\n\n                <div className=\"flex items-center justify-center mt-6 space-x-4\">\n                  {isPaused? (\n                    <Button className=\"py-1 px-6\">\n                        Play\n                    </Button>\n                  )\n                  :\n                  (\n                    <Button className=\"py-1 px-6\">\n                        Pause\n                    </Button>\n                  )}\n                    \n                </div>\n            </Card>\n        </>\n    )\n}\n\nexport default Time"],"mappings":"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"},"metadata":{},"sourceType":"module"}